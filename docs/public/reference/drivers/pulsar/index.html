<!doctype html><html lang=en><head><script integrity=sha384-pb++s6uBRKaQv+iAXpgA/H3IlpLZdO14tTwuCI7uXmz4aaZdByoCcM+6BhynMq/1 src=https://docs.nosqlbench.io/js/theme.min.js></script><link href="https://docs.nosqlbench.io/abridge.css?h=17d1d14ae374495df55a" rel=stylesheet><meta charset=utf-8><meta content="ie=edge" http-equiv=x-ua-compatible><meta content="width=device-width,initial-scale=1" name=viewport><meta content=https://docs.nosqlbench.io name=base><meta content=True name=HandheldFriendly><meta content=yes name=mobile-web-app-capable><meta content=yes name=apple-mobile-web-app-capable><meta content=default name=apple-mobile-web-app-status-bar-style><link href=https://docs.nosqlbench.io/favicon.svg rel=icon type=image/svg+xml><link title="NoSQLBench Documentation Atom Feed" href=https://docs.nosqlbench.io/atom.xml rel=alternate type=application/atom+xml><meta content="index, follow" name=robots><meta content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1" name=googlebot><meta content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1" name=bingbot><title>Pulsar | NoSQLBench Documentation</title><meta content="NoSQLBench Team" name=author><meta content="NoSQLBench Documentation" name=copyright><meta content="Auto-generated reference documentation for Pulsar" name=description><link href=https://docs.nosqlbench.io/reference/drivers/pulsar/ rel=canonical><meta content=https://docs.nosqlbench.io/reference/drivers/pulsar/ property=og:url><meta content=https://docs.nosqlbench.io/reference/drivers/pulsar/ name=twitter:url><meta content="Auto-generated reference documentation for Pulsar" property=og:description><meta content="Auto-generated reference documentation for Pulsar" name=twitter:description><meta content="Pulsar | NoSQLBench Documentation" property=og:title><meta content="Pulsar | NoSQLBench Documentation" name=twitter:title><meta content=summary name=twitter:card><meta content="NoSQLBench Documentation" property=og:site_name><meta content=en_US property=og:locale><meta content=website property=og:type><meta content=2025-11-13 property=og:updated_time><script src="https://docs.nosqlbench.io/js/theme_button.js?h=12a31e87fcbe7a55e953" defer integrity=sha384-UBxLGgFVZtEgNzOU3WqKoFT1oILftGjShFO4WIs1dO/jK7SNyz7BMYCYt5PffTxe></script><script src="https://docs.nosqlbench.io/js/email.js?h=ee3dd742e11c5014fdef" defer integrity=sha384-y0LUfjslyVLYZvCOyhELpvKivlXAq27Vnbed54glXoe/pZSYS/Pfqghp/sQt1xcV></script><script src="https://docs.nosqlbench.io/js/codecopy.js?h=0a54f99e682443925d3a" defer integrity=sha384-qssVvPpQgISh4PFkSBGTgXEMzuFO8Hat5m1MsdkpannoByWSTpLfBe4iEVl3+RiP></script><script src="https://docs.nosqlbench.io/js/elasticlunr.min.js?h=4f648b9e42abdef9c436" defer integrity=sha384-Q8viz7rndi8MSNDtItDgVWNSrCumjepopRMlz2nElkWPRXDQAcfiZGJbrCJVXdtw></script><script src="https://docs.nosqlbench.io/search_index.en.js?h=e2df0fd710d0c807a7aa" defer integrity=sha384-nyOftseEtxo2Pc23RFR1hxsCZHtUr0xOCP7JVJ8oGIs+cnDq6GZkzCq2hWZ2cJIh></script><script src="https://docs.nosqlbench.io/js/searchjava.js?h=36b818b07e8b2b318967" defer integrity=sha384-i6K7Uy98ZLnOwn6no8sDUTeBitDmiLHOKxkcJYbjgu6vQ3hdyMQPzmeuX04BRs8J></script><noscript><link href=https://docs.nosqlbench.io/nojs.css rel=stylesheet></noscript><body><header><nav><div><big><a title="NoSQLBench Documentation" href=https://docs.nosqlbench.io></a></big></div><div><div><ul><li><a href=https://docs.nosqlbench.io/tutorials/> Tutorials </a><li><a href=https://docs.nosqlbench.io/guides/> Guides </a><li><a href=https://docs.nosqlbench.io/reference/> Reference </a><li><a href=https://docs.nosqlbench.io/explanations/> Explanations </a><li><a href=https://docs.nosqlbench.io/development/> Development </a><li><a href=https://github.com/nosqlbench/nosqlbench target=_blank> GitHub </a><li><i class="js svgs adjust" id=mode type=reset></i></ul></div><div><div><form autocomplete=off class=js id=searchbox name=goSearch><div class=searchd><input id=searchinput placeholder=Search title=Search><button class="svgs svgm search" title=Search></button></div><div class=results><div id=suggestions></div></div></form></div></div></div></nav></header><main><article><h1><a href=https://docs.nosqlbench.io/reference/drivers/pulsar/>Pulsar</a></h1><h1 id=pulsar>Pulsar</h1><ul><li><a href=https://docs.nosqlbench.io/reference/drivers/pulsar/#1-overview>1. Overview</a> <ul><li><a href=https://docs.nosqlbench.io/reference/drivers/pulsar/#11-issues-tracker>1.1. Issues Tracker</a></ul><li><a href=https://docs.nosqlbench.io/reference/drivers/pulsar/#2-execute-the-nb-pulsar-driver-workload>2. Execute the NB Pulsar Driver Workload</a> <ul><li><a href=https://docs.nosqlbench.io/reference/drivers/pulsar/#21-nb-pulsar-driver-yaml-file-high-level-structure>2.1. NB Pulsar Driver Yaml File High Level Structure</a><li><a href=https://docs.nosqlbench.io/reference/drivers/pulsar/#22-nb-pulsar-driver-configuration-parameters>2.2. NB Pulsar Driver Configuration Parameters</a> <ul><li><a href=https://docs.nosqlbench.io/reference/drivers/pulsar/#221-global-level-parameters>2.2.1. Global Level Parameters</a><li><a href=https://docs.nosqlbench.io/reference/drivers/pulsar/#222-document-level-parameters>2.2.2. Document Level Parameters</a></ul></ul><li><a href=https://docs.nosqlbench.io/reference/drivers/pulsar/#3-nb-pulsar-driver-optemplates>3. NB Pulsar Driver OpTemplates</a><li><a href=https://docs.nosqlbench.io/reference/drivers/pulsar/#4-message-generation-and-schema-support>4. Message Generation and Schema Support</a> <ul><li><a href=https://docs.nosqlbench.io/reference/drivers/pulsar/#41-message-generation>4.1. Message Generation</a><li><a href=https://docs.nosqlbench.io/reference/drivers/pulsar/#42-schema-support>4.2. Schema Support</a></ul></ul><hr><h1 id=1-overview>1. Overview</h1><p>The NB Pulsar driver allows you to simulate and run different types of workloads (as below) against a Pulsar cluster through NoSQLBench (NB).<ul><li>Admin API - create/delete tenants<li>Admin API - create/delete namespaces<li>Admin API - create/delete topics <ul><li>Topics can be partitioned or non-partitioned</ul><li>Producer - publish messages with schema support <ul><li>Default schema type is byte[]<li>Avro schema and KeyValue schema are also supported</ul><li>Consumer - consume messages with schema support and the following support <ul><li>Different subscription types<li>Multi-topic subscription (including Topic patterns)<li>Subscription initial position<li>Dead letter topic policy<li>Negative acknowledgement and acknowledgement timeout redelivery backoff policy</ul></ul><h2 id=11-issues-tracker>1.1. Issues Tracker</h2><p>If you have issues or new requirements for this driver, please add them at the <a href="https://github.com/nosqlbench/nosqlbench/issues/new?labels=pulsar" rel=noopener target=_blank>pulsar issues tracker</a>.<h1 id=2-execute-the-nb-pulsar-driver-workload>2. Execute the NB Pulsar Driver Workload</h1><p>In order to run a NB Pulsar driver workload, it follows similar command as other NB driver types. But it does have its unique execution parameters. The general command has the following format:<pre class=language-shell data-lang=shell style=color:#c0c5ce;background-color:#2b303b><code class=language-shell data-lang=shell><span>&LTnb_cmd> run driver=pulsar threads=&LTthread_num> cycles=&LTcycle_count> web_url=&LTpulsar_web_svc_url> service_url=&LTpulsar_svc_url> config=&LTpulsar_client_config_property_file> yaml=&LTnb_scenario_yaml_file> [&LTother_common_NB_execution_parameters>]
</span></code></pre><p>In the above command, make sure the driver type is <strong>pulsar</strong> and provide the following Pulsar driver specific parameters:<ul><li><em><strong>web_url</strong></em>: Pulsar web service url and default to “http://localhost:8080”<li><em><strong>service_url</strong></em>: Pulsar native protocol service url and default to “pulsar://localhost:6650”<li><em><strong>config</strong></em>: Pulsar schema/client/producer/consumer related configuration (as a property file)</ul><h2 id=21-nb-pulsar-driver-yaml-file-high-level-structure>2.1. NB Pulsar Driver Yaml File High Level Structure</h2><p>Just like other NB driver types, the actual NB Pulsar workload is defined in a YAML file with the following high level structure:<pre class=language-yaml data-lang=yaml style=color:#c0c5ce;background-color:#2b303b><code class=language-yaml data-lang=yaml><span style=color:#bf616a>description</span><span>: </span><span style=color:#b48ead>|
</span><span style=color:#a3be8c>  ...
</span><span style=color:#a3be8c>
</span><span style=color:#bf616a>bindings</span><span>:
</span><span>  </span><span style=color:#d08770>...
</span><span>
</span><span style=color:#bf616a>params</span><span>:
</span><span>  </span><span style=color:#d08770>...
</span><span>
</span><span style=color:#bf616a>blocks</span><span>:
</span><span>  </span><span style=color:#bf616a>&LTblock_1></span><span>:
</span><span>    </span><span style=color:#bf616a>ops</span><span>:
</span><span>      </span><span style=color:#bf616a>op1</span><span>:
</span><span>        </span><span style=color:#bf616a>&LTOpTypeIdentifier></span><span>: "</span><span style=color:#a3be8c>&LTstatic_or_dynamic_value></span><span>"
</span><span>        </span><span style=color:#bf616a>&LTop_param_1></span><span>: "</span><span style=color:#a3be8c>&LTsome_value></span><span>"
</span><span>        </span><span style=color:#bf616a>&LTop_param_2></span><span>: "</span><span style=color:#a3be8c>&LTsome_value></span><span>"
</span><span>        </span><span style=color:#d08770>...
</span><span>
</span><span>  </span><span style=color:#bf616a>&LTblock_2></span><span>:
</span><span>  </span><span style=color:#d08770>...
</span></code></pre><ul><li><em><strong>description</strong></em>: This is an (optional) section where to provide general description of the Pulsar NB workload defined in this file.<li><em><strong>bindings</strong></em>: This section defines all NB bindings that are required in all OpTemplate blocks<li><em><strong>params</strong></em>: This section defines <strong>Document level</strong> configuration parameters that apply to all OpTemplate blocks.<li><em><strong>blocks</strong></em>: This section defines the OpTemplate blocks that are needed to execute Pulsar specific workloads. Each OpTemplate block may contain multiple OpTemplates.</ul><h2 id=22-nb-pulsar-driver-configuration-parameters>2.2. NB Pulsar Driver Configuration Parameters</h2><p>The NB Pulsar driver configuration parameters can be set at 3 different levels:<ul><li>Global level<li>Document level <ul><li>The parameters at this level are those within a NB yaml file that impact all OpTemplates</ul><li>Op level (or Cycle level) <ul><li>The parameters at this level are those within a NB yaml file that are associated with each individual OpTemplate</ul></ul><p>Please <strong>NOTE</strong> that when a parameter is specified at multiple levels, the one at the lowest level takes precedence.<h3 id=221-global-level-parameters>2.2.1. Global Level Parameters</h3><p>The parameters at this level are those listed in the command line config properties file.<p>The NB Pulsar driver relies on Pulsar’s <a href=https://pulsar.apache.org/docs/en/client-libraries-java/ rel=noopener target=_blank>Java Client API</a> complete its workloads such as creating/deleting tenants/namespaces/topics, generating messages, creating producers to send messages, and creating consumers to receive messages. The Pulsar client API has different configuration parameters to control the execution behavior. For example, <a href=https://pulsar.apache.org/docs/en/client-libraries-java/#configure-producer rel=noopener target=_blank>this document</a> lists all possible configuration parameters for how a Pulsar producer can be created.<p>All these Pulsar “native” parameters are supported by the NB Pulsar driver, via the global configuration properties file (e.g. <strong>config.properties</strong>). An example of the structure of this file looks like below:<pre class=language-properties data-lang=properties style=color:#c0c5ce;background-color:#2b303b><code class=language-properties data-lang=properties><span style=color:#65737e>### Schema related configurations - MUST start with prefix "schema."
</span><span style=color:#65737e>#schema.key.type=avro
</span><span style=color:#65737e>#schema.key.definition=&LT/path/to/avro-key-example.avsc>
</span><span>schema.type=</span><span style=color:#a3be8c>avro
</span><span>schema.definition=</span><span style=color:#a3be8c>&LT/path/to/avro-value-example.avsc>
</span><span>
</span><span style=color:#65737e>### Pulsar client related configurations - MUST start with prefix "client."
</span><span style=color:#65737e># http://pulsar.apache.org/docs/en/client-libraries-java/#client
</span><span>client.connectionTimeoutMs=</span><span style=color:#a3be8c>5000
</span><span>client.authPluginClassName=</span><span style=color:#a3be8c>org.apache.pulsar.client.impl.auth.AuthenticationToken
</span><span>client.authParams=
</span><span style=color:#65737e># ...
</span><span>
</span><span style=color:#65737e>### Producer related configurations (global) - MUST start with prefix "producer."
</span><span style=color:#65737e># http://pulsar.apache.org/docs/en/client-libraries-java/#configure-producer
</span><span>producer.sendTimeoutMs=
</span><span>producer.blockIfQueueFull=</span><span style=color:#a3be8c>true
</span><span style=color:#65737e># ...
</span><span>
</span><span style=color:#65737e>### Consumer related configurations (global) - MUST start with prefix "consumer."
</span><span style=color:#65737e># http://pulsar.apache.org/docs/en/client-libraries-java/#configure-consumer
</span><span>consumer.subscriptionInitialPosition=</span><span style=color:#a3be8c>Earliest
</span><span>consumer.deadLetterPolicy=</span><span style=color:#a3be8c>{"maxRedeliverCount":"5","retryLetterTopic":"public/default/retry","deadLetterTopic":"public/default/dlq","initialSubscriptionName":"dlq-sub"}
</span><span>consumer.ackTimeoutRedeliveryBackoff=</span><span style=color:#a3be8c>{"minDelayMs":"10","maxDelayMs":"20","multiplier":"1.2"}
</span><span style=color:#65737e># ...
</span></code></pre><p>There are multiple sections in this file that correspond to different categories of the configuration parameters:<ul><li><strong><code>Pulsar Schema</code> related settings</strong>: <ul><li>All settings under this section starts with <strong>schema.</strong> prefix.<li>At the moment, there are 3 schema types supported <ul><li>Default raw <em><strong>byte[]</strong></em><li>Avro schema for the message payload<li>KeyValue based Avro schema for both message key and message payload</ul></ul><li><strong><code>Pulsar Client</code> related settings</strong>: <ul><li>All settings under this section starts with <strong>client.</strong> prefix.<li>This section defines all configuration parameters that are related with defining a PulsarClient object. <ul><li>See <a href=https://pulsar.apache.org/docs/en/client-libraries-java/#default-broker-urls-for-standalone-clusters rel=noopener target=_blank>Pulsar Doc Reference</a></ul></ul><li><strong><code>Pulsar Producer</code> related settings</strong>: <ul><li>All settings under this section starts with <strong>producer</strong> prefix.<li>This section defines all configuration parameters that are related with defining a Pulsar Producer object. <ul><li>See <a href=https://pulsar.apache.org/docs/en/client-libraries-java/#configure-producer rel=noopener target=_blank>Pulsar Doc Reference</a></ul></ul><li><strong><code>Pulsar Consumer</code> related settings</strong>: <ul><li>All settings under this section starts with <strong>consumer</strong> prefix.<li>This section defines all configuration parameters that are related with defining a Pulsar Consumer object. <ul><li>See <a href=http://pulsar.apache.org/docs/en/client-libraries-java/#configure-consumer rel=noopener target=_blank>Pulsar Doc Reference</a></ul></ul></ul><h3 id=222-document-level-parameters>2.2.2. Document Level Parameters</h3><p>For the Pulsar NB driver, Document level parameters can only be statically bound; and currently, the following Document level configuration parameters are supported:<ul><li><em><strong>async_api</strong></em> (boolean): <ul><li>When true, use async Pulsar client API.</ul><li><em><strong>use_transaction</strong></em> (boolean): <ul><li>When true, use Pulsar transaction.</ul><li><em><strong>admin_delop</strong></em> (boolean): <ul><li>When true, delete Tenants/Namespaces/Topics. Otherwise, create them.<li>Only applicable to administration related operations</ul><li><em><strong>seq_tracking</strong></em> (boolean): <ul><li>When true, a sequence number is created as part of each message’s properties<li>This parameter is used in conjunction with the next one in order to simulate abnormal message processing errors and then be able to detect such errors successfully.</ul><li><em><strong>seqerr_simu</strong></em>: <ul><li>A list of error simulation types separated by comma (,)<li>Valid error simulation types <ul><li><code>out_of_order</code>: simulate message out of sequence<li><code>msg_loss</code>: simulate message loss<li><code>msg_dup</code>: simulate message duplication</ul><li>This value should be used only for testing purposes. It is not recommended to use this parameter in actual testing environments.</ul><li><em><strong>e2e_starting_time_source</strong></em>: <ul><li>Starting timestamp for end-to-end operation. When specified, will update the <code>e2e_msg_latency</code> histogram with the calculated end-to-end latency. The latency is calculated by subtracting the starting time from the current time. The starting time is determined from a configured starting time source. The unit of the starting time is milliseconds since epoch.<li>The possible values for <code>e2e_starting_time_source</code>: <ul><li><code>message_publish_time</code> : uses the message publishing timestamp as the starting time<li><code>message_event_time</code> : uses the message event timestamp as the starting time<li><code>message_property_e2e_starting_time</code> : uses a message property <code>e2e_starting_time</code> as the starting time.</ul></ul></ul><h1 id=3-nb-pulsar-driver-optemplates>3. NB Pulsar Driver OpTemplates</h1><p>For the NB Pulsar driver, each OpTemplate has the following format:<pre class=language-yaml data-lang=yaml style=color:#c0c5ce;background-color:#2b303b><code class=language-yaml data-lang=yaml><span style=color:#bf616a>blocks</span><span>:
</span><span>  </span><span style=color:#bf616a>&LTsome_block_name></span><span>:
</span><span>    </span><span style=color:#bf616a>ops</span><span>:
</span><span>      </span><span style=color:#bf616a>&LTsome_op_name></span><span>:
</span><span>        </span><span style=color:#bf616a>&LTOpTypeIdentifier></span><span>: </span><span style=color:#a3be8c>&LTtenant|namespace|topic_name>
</span><span>        </span><span style=color:#bf616a>&LTop_param_1></span><span>: "</span><span style=color:#a3be8c>&LTsome_value></span><span>"
</span><span>        </span><span style=color:#bf616a>&LTop_param_2></span><span>: "</span><span style=color:#a3be8c>&LTsome_value></span><span>"
</span><span>        </span><span style=color:#d08770>...
</span></code></pre><p>The <code>OpTypeIdentifier</code> determines which NB Pulsar workload type (<code>OpType</code>) to run, and it has the following value:<pre class=language-java data-lang=java style=color:#c0c5ce;background-color:#2b303b><code class=language-java data-lang=java><span style=color:#b48ead>public enum </span><span style=color:#ebcb8b>PulsarOpType </span><span style=color:#eff1f5>{
</span><span style=color:#eff1f5>    </span><span style=color:#ebcb8b>AdminTenant</span><span style=color:#eff1f5>,
</span><span style=color:#eff1f5>    AdminNamespace,
</span><span style=color:#eff1f5>    AdminTopic,
</span><span style=color:#eff1f5>    MessageProduce,
</span><span style=color:#eff1f5>    MessageConsume
</span><span style=color:#eff1f5>}
</span></code></pre><p>Its value is mandatory and depending on the actual identifier, its value can be one of the following:<ul><li><em><strong>Tenant name</strong></em>: for <code>AdminTenant</code> type<li><em><strong>Namespace name</strong></em>: for <code>AdminNamespace</code> type and in format “<tenant>/<namespace>” <li><em><strong>Topic name</strong></em>: for the rest of the types and in format [(persistent|non-persistent)://]<tenant>/<namespace>/<topic> is mandatory for each NB Pulsar operation type <p>Each Pulsar <code>OpType</code> may have optional Op specific parameters. Please refer to <a href=https://docs.nosqlbench.io/reference/drivers/pulsar/yaml_examples>here</a> for the example NB Pulsar YAML files for each OpType</p> <h1 id=4-message-generation-and-schema-support>4. Message Generation and Schema Support</h1> <h2 id=41-message-generation>4.1. Message Generation</h2> <p>A Pulsar message has three main components: message key, message properties, and message payload. Among them, message payload is mandatory when creating a message.</p> <p>When running the “message producing” workload, the NB Pulsar driver is able to generate a message with its full content via the following OpTemplate level parameters:</p> <ul><li><code>msg_key</code>: defines message key value<li><code>msg_property</code>: defines message property values<li><code>msg_value</code>: defines message payload value</ul> <p>The actual values of them can be static or dynamic (which are determined by NB data binding rules)</p> <p>For <code>msg_key</code>, its value can be either</p> <ul><li>a plain text string, or<li>a JSON string that follows the specified “key” Avro schema (when KeyValue schema is used)</ul> <p>For <code>msg_property</code>, its value needs to be a JSON string that contains a list of key-value pairs. An example is as below. Please <strong>NOTE</strong> that if the provided value is not a valid JSON string, the NB Pulsar driver will ignore it and treat the message as having no properties.</p> <pre style=color:#c0c5ce;background-color:#2b303b><code><span>  msg_property: |
</span><span>    {
</span><span>      "prop1": "{myprop1}",
</span><span>      "prop2": "{myprop2}"
</span><span>    }
</span></code></pre> <p>For <code>msg_value</code>, its value can be either</p> <ul><li>a plain simple text, or<li>a JSON string that follows the specified “value” Avro schema (when Avro schema or KeyValue schema is used)</ul> <h2 id=42-schema-support>4.2. Schema Support</h2> <p>The NB Pulsar driver supports the following Pulsar schema types:</p> <ul><li>Primitive schema types<li>Avro schema type (only for message payload - <code>msg_value</code>)<li>KeyValue schema type (with both key and value follows an Avro schema)</ul> <p>The following 2 global configuration parameters define the required schema type</p> <ul><li><code>schema.key.type</code>: defines message key type<li><code>schema.type</code>: defines message value type For them, if the parameter value is not specified, it means using the default <code>byte[]/BYTES</code> type as the schema type. Otherwise, if it is specified as “avro”, it means using Avro as the schema type.</ul> <p>The following 2 global configuration parameters define the schema specification (<strong>ONLY</strong> needed when Avro is the schema type)</p> <ul><li><code>schema.key.definition</code>: a file path that defines the message key Avro schema specification<li><code>schema.definition</code>: a file path the message value Avro schema specification The NB Pulsar driver will throw an error if the schema type is Avro but no schema specification definition file is not provided or is not valid.</ul> <nav><div><a href=https://docs.nosqlbench.io/reference/drivers/dynamodb/>‹ dynamodb</a></div><div><a href=https://docs.nosqlbench.io/reference/drivers/tcpserver/> tcpserver ›</a></div></nav> <footer><div class=c><nav class=tpad><div></div></nav><p>© <span id=year>2025</span> NoSQLBench Documentation<p>Powered by <a href=https://www.getzola.org/ target=_blank>Zola</a> & <a href=https://github.com/jieiku/abridge/ target=_blank>Abridge</a></div></footer><span class=topout> <span class=topleft> </span><a title="Back to Top" class=top href=#><i class="svgs svgh angu"></i></a> </span> 