<!doctype html><html lang=en><head><script integrity=sha384-pb++s6uBRKaQv+iAXpgA/H3IlpLZdO14tTwuCI7uXmz4aaZdByoCcM+6BhynMq/1 src=https://docs.nosqlbench.io/js/theme.min.js></script><link href="https://docs.nosqlbench.io/abridge.css?h=17d1d14ae374495df55a" rel=stylesheet><meta charset=utf-8><meta content="ie=edge" http-equiv=x-ua-compatible><meta content="width=device-width,initial-scale=1" name=viewport><meta content=https://docs.nosqlbench.io name=base><meta content=True name=HandheldFriendly><meta content=yes name=mobile-web-app-capable><meta content=yes name=apple-mobile-web-app-capable><meta content=default name=apple-mobile-web-app-status-bar-style><link href=https://docs.nosqlbench.io/favicon.svg rel=icon type=image/svg+xml><link title="NoSQLBench Documentation Atom Feed" href=https://docs.nosqlbench.io/atom.xml rel=alternate type=application/atom+xml><meta content="index, follow" name=robots><meta content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1" name=googlebot><meta content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1" name=bingbot><title>Kafka | NoSQLBench Documentation</title><meta content="NoSQLBench Team" name=author><meta content="NoSQLBench Documentation" name=copyright><meta content="Auto-generated reference documentation for Kafka" name=description><link href=https://docs.nosqlbench.io/reference/drivers/kafka/ rel=canonical><meta content=https://docs.nosqlbench.io/reference/drivers/kafka/ property=og:url><meta content=https://docs.nosqlbench.io/reference/drivers/kafka/ name=twitter:url><meta content="Auto-generated reference documentation for Kafka" property=og:description><meta content="Auto-generated reference documentation for Kafka" name=twitter:description><meta content="Kafka | NoSQLBench Documentation" property=og:title><meta content="Kafka | NoSQLBench Documentation" name=twitter:title><meta content=summary name=twitter:card><meta content="NoSQLBench Documentation" property=og:site_name><meta content=en_US property=og:locale><meta content=website property=og:type><meta content=2025-11-13 property=og:updated_time><script src="https://docs.nosqlbench.io/js/theme_button.js?h=12a31e87fcbe7a55e953" defer integrity=sha384-UBxLGgFVZtEgNzOU3WqKoFT1oILftGjShFO4WIs1dO/jK7SNyz7BMYCYt5PffTxe></script><script src="https://docs.nosqlbench.io/js/email.js?h=ee3dd742e11c5014fdef" defer integrity=sha384-y0LUfjslyVLYZvCOyhELpvKivlXAq27Vnbed54glXoe/pZSYS/Pfqghp/sQt1xcV></script><script src="https://docs.nosqlbench.io/js/codecopy.js?h=0a54f99e682443925d3a" defer integrity=sha384-qssVvPpQgISh4PFkSBGTgXEMzuFO8Hat5m1MsdkpannoByWSTpLfBe4iEVl3+RiP></script><script src="https://docs.nosqlbench.io/js/elasticlunr.min.js?h=4f648b9e42abdef9c436" defer integrity=sha384-Q8viz7rndi8MSNDtItDgVWNSrCumjepopRMlz2nElkWPRXDQAcfiZGJbrCJVXdtw></script><script src="https://docs.nosqlbench.io/search_index.en.js?h=e2df0fd710d0c807a7aa" defer integrity=sha384-nyOftseEtxo2Pc23RFR1hxsCZHtUr0xOCP7JVJ8oGIs+cnDq6GZkzCq2hWZ2cJIh></script><script src="https://docs.nosqlbench.io/js/searchjava.js?h=36b818b07e8b2b318967" defer integrity=sha384-i6K7Uy98ZLnOwn6no8sDUTeBitDmiLHOKxkcJYbjgu6vQ3hdyMQPzmeuX04BRs8J></script><noscript><link href=https://docs.nosqlbench.io/nojs.css rel=stylesheet></noscript><body><header><nav><div><big><a title="NoSQLBench Documentation" href=https://docs.nosqlbench.io></a></big></div><div><div><ul><li><a href=https://docs.nosqlbench.io/tutorials/> Tutorials </a><li><a href=https://docs.nosqlbench.io/guides/> Guides </a><li><a href=https://docs.nosqlbench.io/reference/> Reference </a><li><a href=https://docs.nosqlbench.io/explanations/> Explanations </a><li><a href=https://docs.nosqlbench.io/development/> Development </a><li><a href=https://github.com/nosqlbench/nosqlbench target=_blank> GitHub </a><li><i class="js svgs adjust" id=mode type=reset></i></ul></div><div><div><form autocomplete=off class=js id=searchbox name=goSearch><div class=searchd><input id=searchinput placeholder=Search title=Search><button class="svgs svgm search" title=Search></button></div><div class=results><div id=suggestions></div></div></form></div></div></div></nav></header><main><article><h1><a href=https://docs.nosqlbench.io/reference/drivers/kafka/>Kafka</a></h1><ul><li><a href=https://docs.nosqlbench.io/reference/drivers/kafka/#1-overview>1. Overview</a> <ul><li><a href=https://docs.nosqlbench.io/reference/drivers/kafka/#11-example-nb-yaml>1.1. Example NB Yaml</a></ul><li><a href=https://docs.nosqlbench.io/reference/drivers/kafka/#2-usage>2. Usage</a> <ul><li><a href=https://docs.nosqlbench.io/reference/drivers/kafka/#21-nb-kafka-adapter-specific-cli-parameters>2.1. NB Kafka adapter specific CLI parameters</a></ul></ul><hr><h1 id=1-overview>1. Overview</h1><p>The NB Kafka adapter allows publishing messages to or consuming messages from<ul><li>a Kafka cluster, or<li>a Pulsar cluster with <a href=https://github.com/datastax/starlight-for-kafka rel=noopener target=_blank>S4K</a> or <a href=https://github.com/streamnative/kop rel=noopener target=_blank>KoP</a> Kafka Protocol handler for Pulsar.</ul><p>At high level, this adapter supports the following Kafka functionalities<ul><li>Publishing messages to one Kafka topic with sync. or async. message-send acknowledgements (from brokers)<li>Subscribing messages from one or multiple Kafka topics with sync. or async. message-recv acknowledgements (to brokers) (aka, message commits) <ul><li>auto message commit<li>manual message commit with a configurable number of message commits in one batch</ul><li>Kafka Transaction support</ul><h2 id=11-example-nb-yaml>1.1. Example NB Yaml</h2><ul><li><a href=https://docs.nosqlbench.io/reference/drivers/kafka/scenarios/kafka_producer.yaml>kafka_producer.yaml</a><li><li><a href=https://docs.nosqlbench.io/reference/drivers/kafka/scenarios/kafka_consumer.yaml>kafka_consumer.yaml</a></ul><h1 id=2-usage>2. Usage</h1><pre class=language-bash data-lang=bash style=color:#c0c5ce;background-color:#2b303b><code class=language-bash data-lang=bash><span style=color:#65737e>## Kafka Producer
</span><span style=color:#bf616a>$ </span><span>&LTnb_cmd> run driver=kafka</span><span style=color:#bf616a> -vv</span><span> cycles=100 threads=2 num_clnt=2 yaml=kafka_producer.yaml config=kafka_config.properties bootstrap_server=PLAINTEXT://localhost:9092
</span><span>
</span><span style=color:#65737e>## Kafka Consumer
</span><span style=color:#bf616a>$ </span><span>&LTnb_cmd> run driver=kafka</span><span style=color:#bf616a> -vv</span><span> cycles=100 threads=4 num_clnt=2 num_cons_grp=2 yaml=kafka_producer.yaml config=kafka_config.properties bootstrap_server=PLAINTEXT://localhost:9092
</span></code></pre><h2 id=21-nb-kafka-adapter-specific-cli-parameters>2.1. NB Kafka adapter specific CLI parameters</h2><ul><li><p><code>num_clnt</code>: the number of Kafka clients to publish messages to or to receive messages from</p> <ul><li>For producer workload, this is the number of the producer threads to publish messages to the same topic <ul><li>Can have multiple producer threads for one topic/partition (<code>KafkaProducer</code> is thread-safe)<li><code>threads</code> and <code>num_clnt</code> values MUST be the same.</ul><li>For consumer workload, this is the partition number of a topic <ul><li>Consumer workload supports to subscribe from multiple topics. If so, it requires all topics having the same partition number.<li>Only one consumer thread for one topic/partition (<code>KafkaConsumer</code> is NOT thread-safe)<li><code>threads</code> MUST be equal to <code>num_clnt</code>*<code>num_cons_grp</code></ul></ul><li><p><code>num_cons_grp</code>: the number of consumer groups</p> <ul><li>Only relevant for consumer workload</ul></ul><p>For the Kafka NB adapter, Document level parameters can only be statically bound; and currently, the following Document level configuration parameters are supported:<ul><li><code>async_api</code> (boolean): <ul><li>When true, use async Kafka client API.</ul><li><code>seq_tracking</code> (boolean): <ul><li>When true, a sequence number is created as part of each message’s properties<li>This parameter is used in conjunction with the next one in order to simulate abnormal message processing errors and then be able to detect such errors successfully.</ul><li><code>seqerr_simu</code>: <ul><li>A list of error simulation types separated by comma (,)<li>Valid error simulation types <ul><li><code>out_of_order</code>: simulate message out of sequence<li><code>msg_loss</code>: simulate message loss<li><code>msg_dup</code>: simulate message duplication</ul><li>This value should be used only for testing purposes. It is not recommended to use this parameter in actual testing environments.</ul><li><code>e2e_starting_time_source</code>: <ul><li>Starting timestamp for end-to-end operation. When specified, will update the <code>e2e_msg_latency</code> histogram with the calculated end-to-end latency. The latency is calculated by subtracting the starting time from the current time. The starting time is determined from a configured starting time source. The unit of the starting time is milliseconds since epoch.<li>The possible values for <code>e2e_starting_time_source</code>: <ul><li><code>message_publish_time</code> : uses the message publishing timestamp as the starting time. The message publishing time, in this case, <a href=https://kafka.apache.org/34/javadoc/org/apache/kafka/clients/producer/ProducerRecord.html rel=noopener target=_blank>is computed by the Kafka client on record generation</a>. This is the case, as <a href=https://docs.confluent.io/platform/current/installation/configuration/topic-configs.html#message-timestamp-type rel=noopener target=_blank><code>CreateTime</code> is the default</a>.</ul></ul></ul><nav><div><a href=https://docs.nosqlbench.io/reference/drivers/diag/>‹ diag</a></div><div><a href=https://docs.nosqlbench.io/reference/drivers/amqp/> AMQP ›</a></div></nav></article></main><footer><div class=c><nav class=tpad><div></div></nav><p>© <span id=year>2025</span> NoSQLBench Documentation<p>Powered by <a href=https://www.getzola.org/ target=_blank>Zola</a> & <a href=https://github.com/jieiku/abridge/ target=_blank>Abridge</a></div></footer><span class=topout> <span class=topleft> </span><a title="Back to Top" class=top href=#><i class="svgs svgh angu"></i></a> </span>