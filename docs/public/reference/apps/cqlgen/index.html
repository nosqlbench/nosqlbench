<!doctype html><html lang=en><head><script integrity=sha384-pb++s6uBRKaQv+iAXpgA/H3IlpLZdO14tTwuCI7uXmz4aaZdByoCcM+6BhynMq/1 src=https://docs.nosqlbench.io/js/theme.min.js></script><link href="https://docs.nosqlbench.io/abridge.css?h=17d1d14ae374495df55a" rel=stylesheet><meta charset=utf-8><meta content="ie=edge" http-equiv=x-ua-compatible><meta content="width=device-width,initial-scale=1" name=viewport><meta content=https://docs.nosqlbench.io name=base><meta content=True name=HandheldFriendly><meta content=yes name=mobile-web-app-capable><meta content=yes name=apple-mobile-web-app-capable><meta content=default name=apple-mobile-web-app-status-bar-style><link href=https://docs.nosqlbench.io/favicon.svg rel=icon type=image/svg+xml><link title="NoSQLBench Documentation Atom Feed" href=https://docs.nosqlbench.io/atom.xml rel=alternate type=application/atom+xml><meta content="index, follow" name=robots><meta content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1" name=googlebot><meta content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1" name=bingbot><title>cqlgen | NoSQLBench Documentation</title><meta content="NoSQLBench Team" name=author><meta content="NoSQLBench Documentation" name=copyright><meta content="Auto-generated reference documentation for cqlgen" name=description><link href=https://docs.nosqlbench.io/reference/apps/cqlgen/ rel=canonical><meta content=https://docs.nosqlbench.io/reference/apps/cqlgen/ property=og:url><meta content=https://docs.nosqlbench.io/reference/apps/cqlgen/ name=twitter:url><meta content="Auto-generated reference documentation for cqlgen" property=og:description><meta content="Auto-generated reference documentation for cqlgen" name=twitter:description><meta content="cqlgen | NoSQLBench Documentation" property=og:title><meta content="cqlgen | NoSQLBench Documentation" name=twitter:title><meta content=summary name=twitter:card><meta content="NoSQLBench Documentation" property=og:site_name><meta content=en_US property=og:locale><meta content=website property=og:type><meta content=2025-11-13 property=og:updated_time><script src="https://docs.nosqlbench.io/js/theme_button.js?h=12a31e87fcbe7a55e953" defer integrity=sha384-UBxLGgFVZtEgNzOU3WqKoFT1oILftGjShFO4WIs1dO/jK7SNyz7BMYCYt5PffTxe></script><script src="https://docs.nosqlbench.io/js/email.js?h=ee3dd742e11c5014fdef" defer integrity=sha384-y0LUfjslyVLYZvCOyhELpvKivlXAq27Vnbed54glXoe/pZSYS/Pfqghp/sQt1xcV></script><script src="https://docs.nosqlbench.io/js/codecopy.js?h=0a54f99e682443925d3a" defer integrity=sha384-qssVvPpQgISh4PFkSBGTgXEMzuFO8Hat5m1MsdkpannoByWSTpLfBe4iEVl3+RiP></script><script src="https://docs.nosqlbench.io/js/elasticlunr.min.js?h=4f648b9e42abdef9c436" defer integrity=sha384-Q8viz7rndi8MSNDtItDgVWNSrCumjepopRMlz2nElkWPRXDQAcfiZGJbrCJVXdtw></script><script src="https://docs.nosqlbench.io/search_index.en.js?h=e2df0fd710d0c807a7aa" defer integrity=sha384-nyOftseEtxo2Pc23RFR1hxsCZHtUr0xOCP7JVJ8oGIs+cnDq6GZkzCq2hWZ2cJIh></script><script src="https://docs.nosqlbench.io/js/searchjava.js?h=36b818b07e8b2b318967" defer integrity=sha384-i6K7Uy98ZLnOwn6no8sDUTeBitDmiLHOKxkcJYbjgu6vQ3hdyMQPzmeuX04BRs8J></script><noscript><link href=https://docs.nosqlbench.io/nojs.css rel=stylesheet></noscript><body><header><nav><div><big><a title="NoSQLBench Documentation" href=https://docs.nosqlbench.io></a></big></div><div><div><ul><li><a href=https://docs.nosqlbench.io/tutorials/> Tutorials </a><li><a href=https://docs.nosqlbench.io/guides/> Guides </a><li><a href=https://docs.nosqlbench.io/reference/> Reference </a><li><a href=https://docs.nosqlbench.io/explanations/> Explanations </a><li><a href=https://docs.nosqlbench.io/development/> Development </a><li><a href=https://github.com/nosqlbench/nosqlbench target=_blank> GitHub </a><li><i class="js svgs adjust" id=mode type=reset></i></ul></div><div><div><form autocomplete=off class=js id=searchbox name=goSearch><div class=searchd><input id=searchinput placeholder=Search title=Search><button class="svgs svgm search" title=Search></button></div><div class=results><div id=suggestions></div></div></form></div></div></div></nav></header><main><article><h1><a href=https://docs.nosqlbench.io/reference/apps/cqlgen/>cqlgen</a></h1><h1 id=cqlgen>cqlgen</h1><p><em>cqlgen</em> is a default CQL workload generator<p>With NB5, the cqld4 driver comes with a workload generator that can be used to generate a workload yaml from a CQL schema file.<p>Development on this workload generator is just starting, but it is already in a useful state. Eventually, workload observation and monitoring methods will be used to create workloads which more accurately emulate those in-situ.<h2 id=inputs-outputs>Inputs & Outputs</h2><p>You need the cql schema for whatever keyspaces, types, and tables you want to include. Optionally, you can provide a table stats file which is generated as <a href=https://cassandra.apache.org/doc/latest/cassandra/tools/nodetool/tablestats.html#tablestats rel=noopener target=_blank><code>nodetool tablestats > tablestats</code></a>.<p><strong>Note</strong>: The tablestats file provides results only for a single node. As such, you will want to adjust a config parameter called <code>partition_multiplier</code> (within the <code>cqlgen.conf</code>) to improve accuracy of the generated workload. Further, the file only contains traffic and data details since the last time your node was restarted, thus it may not be representative of the overall character of your workload and data.<h2 id=usage>Usage</h2><p>A typical <em>cqlgen</em> command looks like this:<pre style=color:#c0c5ce;background-color:#2b303b><code><span>nb5 cqlgen myschema.cql myworkload.yaml myhistograms
</span></code></pre><ol><li>The first option is simply the name of the .cql file containing your schema.<li>The second is the name of the output yaml. The generator will <em>not</em> overwrite this file for you.<li>The third option is an optional table stats file created with <code>nodetool tablestats >tablestats</code>. If provided, the reads, writes, and estimated partition counts will be used to weight the workload to the tables and data sizes automatically.</ol><p>For now, it is almost certain that you’ll need to extract the configs and tailor them as described below. Then, when you run <code>nb5 cqlgen ...</code> the config files in the current directory will be used.<h2 id=workload-patterns>Workload Patterns</h2><p>The initial version of the cql workload generator provides these defaults:<ul><li>All keyspaces, tables, or types which are provided on the input are included in the workload.<li>All create syntax has “if not exists” added.<li>All drop syntax has “if exists” added.<li>All table DDL properties are ignored except for durable writes.<li>The default replication settings are as for local testing with SimpleReplicationStrategy. For testing on a proper cluster with NetworkTopology or in Astra, you’ll need to modify this in the configs explained below.<li>All UDTs are converted to blobs. This will be replaced by a layer which understands UDTs very soon.<li>Data bindings are created using the simplest possible binding recipes that work.<li>Cardinalities on partition-specific bindings are multiplied by 10. This presumes even data distribution, replication factor 3, and 30 nodes. This method will be improved in the future.<li>For the main phase, reads, writes, updates, and scans are included, 1 each. <ul><li>reads select * from a fully qualified predicate.<li>writes will write to all named fields.<li>updates change all fields with a fully qualified predicate.<li>scan-10 will read up to 10 consecutive rows from a partition with a partially qualified predicate. This means the last clustering column is not included in the predicates. Single key (1 partition component) tables do not have a scan created for them.<li>When partition estimates are provided, all read and writes statements have predicates for the last partition component modified to modulo by the estimated partition cardinality.</ul></ul><h2 id=fine-tuning>Fine Tuning</h2><p>The generator uses two internal files for the purposes of setting defaults:<ul><li><code>cqlgen.conf</code> - a yaml formatted configuration file.<li><code>bindings-cqlgen.yaml</code></ul><p>Both of these files will be read from the internal nb5 resources unless you pull them into the local directory with these commands:<pre style=color:#c0c5ce;background-color:#2b303b><code><span>nb5 --copy cqlgen/bindings-cqlgen.yaml
</span><span>nb5 --copy cqlgen/cqlgen.conf
</span></code></pre><p>The details of how to customize these files are included within them. The <code>bindings-cqlgen.yaml</code> file contains default bindings by type. If you get <em>UnresolvedBindingsException</em> when trying to generate a workload, then a binding for the type in question must be added to the <code>bindings-cqlgen.yaml</code> file.<p>The <code>cqlgen.conf</code> controls much of the internal wiring of the workload generator. Modifying it gives you the ability to enable and disable certain stages and behaviors, like:<ul><li>obfuscating all keyspace, table, and column names<li>keyspaces to include by name<li>tables to exclude by traffic<li>setting the replcation fields<li>default timeouts<li>block naming and construction (which type of operations are included in each)</ul><p>These are mostly controlled by a series of processing phases known as transformers. Some transformers depend on others upstream, but if the data provided is not sufficient, they will silently pass-through.<p>This is a new feature of the NoSQLBench driver. If you are an early adopter, please reach out with <a href=https://github.com/nosqlbench/nosqlbench/issues/new/choose rel=noopener target=_blank>ideas, or for requests and support</a> as needed.<nav><div><a href=https://docs.nosqlbench.io/reference/apps/mql/>‹ MetricsQL Query Engine</a></div><div><a href=https://docs.nosqlbench.io/reference/apps/virtdata/> virtdata ›</a></div></nav></article></main><footer><div class=c><nav class=tpad><div></div></nav><p>© <span id=year>2025</span> NoSQLBench Documentation<p>Powered by <a href=https://www.getzola.org/ target=_blank>Zola</a> & <a href=https://github.com/jieiku/abridge/ target=_blank>Abridge</a></div></footer><span class=topout> <span class=topleft> </span><a title="Back to Top" class=top href=#><i class="svgs svgh angu"></i></a> </span>