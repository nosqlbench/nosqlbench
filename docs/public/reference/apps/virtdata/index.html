<!doctype html><html lang=en><head><script integrity=sha384-pb++s6uBRKaQv+iAXpgA/H3IlpLZdO14tTwuCI7uXmz4aaZdByoCcM+6BhynMq/1 src=https://docs.nosqlbench.io/js/theme.min.js></script><link href="https://docs.nosqlbench.io/abridge.css?h=17d1d14ae374495df55a" rel=stylesheet><meta charset=utf-8><meta content="ie=edge" http-equiv=x-ua-compatible><meta content="width=device-width,initial-scale=1" name=viewport><meta content=https://docs.nosqlbench.io name=base><meta content=True name=HandheldFriendly><meta content=yes name=mobile-web-app-capable><meta content=yes name=apple-mobile-web-app-capable><meta content=default name=apple-mobile-web-app-status-bar-style><link href=https://docs.nosqlbench.io/favicon.svg rel=icon type=image/svg+xml><link title="NoSQLBench Documentation Atom Feed" href=https://docs.nosqlbench.io/atom.xml rel=alternate type=application/atom+xml><meta content="index, follow" name=robots><meta content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1" name=googlebot><meta content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1" name=bingbot><title>virtdata | NoSQLBench Documentation</title><meta content="NoSQLBench Team" name=author><meta content="NoSQLBench Documentation" name=copyright><meta content="Auto-generated reference documentation for virtdata" name=description><link href=https://docs.nosqlbench.io/reference/apps/virtdata/ rel=canonical><meta content=https://docs.nosqlbench.io/reference/apps/virtdata/ property=og:url><meta content=https://docs.nosqlbench.io/reference/apps/virtdata/ name=twitter:url><meta content="Auto-generated reference documentation for virtdata" property=og:description><meta content="Auto-generated reference documentation for virtdata" name=twitter:description><meta content="virtdata | NoSQLBench Documentation" property=og:title><meta content="virtdata | NoSQLBench Documentation" name=twitter:title><meta content=summary name=twitter:card><meta content="NoSQLBench Documentation" property=og:site_name><meta content=en_US property=og:locale><meta content=website property=og:type><meta content=2025-11-13 property=og:updated_time><script src="https://docs.nosqlbench.io/js/theme_button.js?h=12a31e87fcbe7a55e953" defer integrity=sha384-UBxLGgFVZtEgNzOU3WqKoFT1oILftGjShFO4WIs1dO/jK7SNyz7BMYCYt5PffTxe></script><script src="https://docs.nosqlbench.io/js/email.js?h=ee3dd742e11c5014fdef" defer integrity=sha384-y0LUfjslyVLYZvCOyhELpvKivlXAq27Vnbed54glXoe/pZSYS/Pfqghp/sQt1xcV></script><script src="https://docs.nosqlbench.io/js/codecopy.js?h=0a54f99e682443925d3a" defer integrity=sha384-qssVvPpQgISh4PFkSBGTgXEMzuFO8Hat5m1MsdkpannoByWSTpLfBe4iEVl3+RiP></script><script src="https://docs.nosqlbench.io/js/elasticlunr.min.js?h=4f648b9e42abdef9c436" defer integrity=sha384-Q8viz7rndi8MSNDtItDgVWNSrCumjepopRMlz2nElkWPRXDQAcfiZGJbrCJVXdtw></script><script src="https://docs.nosqlbench.io/search_index.en.js?h=e2df0fd710d0c807a7aa" defer integrity=sha384-nyOftseEtxo2Pc23RFR1hxsCZHtUr0xOCP7JVJ8oGIs+cnDq6GZkzCq2hWZ2cJIh></script><script src="https://docs.nosqlbench.io/js/searchjava.js?h=36b818b07e8b2b318967" defer integrity=sha384-i6K7Uy98ZLnOwn6no8sDUTeBitDmiLHOKxkcJYbjgu6vQ3hdyMQPzmeuX04BRs8J></script><noscript><link href=https://docs.nosqlbench.io/nojs.css rel=stylesheet></noscript><body><header><nav><div><big><a title="NoSQLBench Documentation" href=https://docs.nosqlbench.io></a></big></div><div><div><ul><li><a href=https://docs.nosqlbench.io/tutorials/> Tutorials </a><li><a href=https://docs.nosqlbench.io/guides/> Guides </a><li><a href=https://docs.nosqlbench.io/reference/> Reference </a><li><a href=https://docs.nosqlbench.io/explanations/> Explanations </a><li><a href=https://docs.nosqlbench.io/development/> Development </a><li><a href=https://github.com/nosqlbench/nosqlbench target=_blank> GitHub </a><li><i class="js svgs adjust" id=mode type=reset></i></ul></div><div><div><form autocomplete=off class=js id=searchbox name=goSearch><div class=searchd><input id=searchinput placeholder=Search title=Search><button class="svgs svgm search" title=Search></button></div><div class=results><div id=suggestions></div></div></form></div></div></div></nav></header><main><article><h1><a href=https://docs.nosqlbench.io/reference/apps/virtdata/>virtdata</a></h1><h1 id=virtdata>virtdata</h1><p>NB5 contains a bundled virtdata app which lets you verify bindings from the command line. It is useful for sanity checking values as well as getting a concurrent performance baseline for specific binding recipes.<h1 id=diagnostic-mode>diagnostic mode</h1><p>The <code>diagnose</code> mode of virtdata can be used to explain binding resolution logic and potentially how to fix a binding that doesn’t resolve properly:<pre class=language-shell data-lang=shell style=color:#c0c5ce;background-color:#2b303b><code class=language-shell data-lang=shell><span>nb5 virtdata diagnose "Combinations('0-90-9'); ToInt();"
</span></code></pre><h1 id=perftest-mode>perftest mode</h1><p>To see the options you can simply run <code>nb5 virtdata testmapper</code>, which gives you<pre style=color:#c0c5ce;background-color:#2b303b><code><span>ARGS: checkperf 'specifier' threads bufsize start end
</span><span>example: 'timeuuid()' 100 1000 0 10000
</span><span>specifier: A VirtData function specifier.
</span><span>threads: The number of concurrent threads to run.
</span><span>bufsize: The number of cycles to give each thread at a time.
</span><span>start: The start cycle for the test, inclusive.
</span><span>end: The end cycle for the test, exclusive.
</span></code></pre><p>Assuming you have a working binding recipe that you want to measure for concurrent performance, you can use the form below:<pre class=language-shell data-lang=shell style=color:#c0c5ce;background-color:#2b303b><code class=language-shell data-lang=shell><span>nb5 virtdata testmapper "Combinations('0-90-9'); ToInt();" 96 1000 0 1000000
</span></code></pre><p>Here is what happens when you run this:<ol><li>The binding is resolved.<li>A single thread (the first thread) generates the values into a reference buffer.<li>The specified number of threads is started, and synchronized for simultaneous start.<li>Each thread is given successive batches of input values from the cycle rage specified, in chunks of bufsize each. A dot <code>.</code> is printed to the console for each completed chunk.<li>Once all threads are complete, each checks their values against the reference buffer, and an exception is thrown if any difference are found. (This would mean concurrency is affecting the values, which is not allowed for binding functions.)<li>After all chunks are generated and verified, statistics are displayed to the console:</ol><h2 id=output-details>output details</h2><pre class=language-text data-lang=text data-linenos style=color:#c0c5ce;background-color:#2b303b><code class=language-text data-lang=text><table><tbody><tr><td>1<td><span>         run data = [derived values in brackets]
</span><tr><td>2<td><span>        specifier = 'Combinations('0-90-9'); ToInt();'
</span><tr><td>3<td><span>          threads = 96
</span><tr><td>4<td><span>              min = 0
</span><tr><td>5<td><span>              max = 1000000
</span><tr><td>6<td><span>          [count] = 1000000
</span><tr><td>7<td><span>       buffersize = 1000
</span><tr><td>8<td><span> [totalGenTimeMs] = 2408.874399
</span><tr><td>9<td><span> [totalCmpTimeMs] = 2274.510746
</span><tr><td>10<td><span>       [genPerMs] = 39852.638
</span><tr><td>11<td><span>       [cmpPerMs] = 42206.879
</span><tr><td>12<td><span>        [genPerS] = 39852638.245
</span><tr><td>13<td><span>        [cmpPerS] = 42206879.070
</span></table></code></pre><p>This shows that on a 12 core (24 thread) system, Around <strong>40 million</strong> variates are able to be generated from the above recipe (across all cores, of course).<p>In detail:<ul><li><code>[totalGenTimeMs]</code> tracks the total time the thread pool spent generating data, in milliseconds.<li><code>[totalCmpTimeMs]</code> tracks the total time the thread pool spent cross-checking data across threads.<li><code>[genPerMs]</code> and <code>[cmpPerMs]</code> show the calculated rates for generation and validation <em>per millisecond</em>, respectively.<li><code>[genPerS]</code> and <code>[cmpPerS]</code> show the calculated rates for generation and validation <em>per second</em>, respectively.</ul><h2 id=interpretation>interpretation</h2><p>This example shows how effective variate generation can be. This doesn’t mean that you can easily simulate 40 million operations with this data. However, it does <em>anecdotally</em> indicate the proportional load that generation puts on the system. For example, if you were generating around 400K ops/s from a client with only this binding, it would be reasonable that variate generation consumes around (400,000/40,000,000) of the system’s cycles, or around 1%.<p>More realistic testing scenarios are likely to use proportionally more due to the amount of data generation which is needed. Still, generating synthetic data makes for a more capable testing harnesses because of the extra headroom you leave in your system for other necessary work, like managing a driver’s connection pool or serdes on requests and responses.<nav><div><a href=https://docs.nosqlbench.io/reference/apps/cqlgen/>‹ cqlgen</a></div><div><a href=https://docs.nosqlbench.io/reference/apps/export-docs/> export-docs ›</a></div></nav></article></main><footer><div class=c><nav class=tpad><div></div></nav><p>© <span id=year>2025</span> NoSQLBench Documentation<p>Powered by <a href=https://www.getzola.org/ target=_blank>Zola</a> & <a href=https://github.com/jieiku/abridge/ target=_blank>Abridge</a></div></footer><span class=topout> <span class=topleft> </span><a title="Back to Top" class=top href=#><i class="svgs svgh angu"></i></a> </span>