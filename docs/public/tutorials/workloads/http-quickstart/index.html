<!doctype html><html lang=en><head><script integrity=sha384-pb++s6uBRKaQv+iAXpgA/H3IlpLZdO14tTwuCI7uXmz4aaZdByoCcM+6BhynMq/1 src=https://docs.nosqlbench.io/js/theme.min.js></script><link href="https://docs.nosqlbench.io/abridge.css?h=17d1d14ae374495df55a" rel=stylesheet><meta charset=utf-8><meta content="ie=edge" http-equiv=x-ua-compatible><meta content="width=device-width,initial-scale=1" name=viewport><meta content=https://docs.nosqlbench.io name=base><meta content=True name=HandheldFriendly><meta content=yes name=mobile-web-app-capable><meta content=yes name=apple-mobile-web-app-capable><meta content=default name=apple-mobile-web-app-status-bar-style><link href=https://docs.nosqlbench.io/favicon.svg rel=icon type=image/svg+xml><link title="NoSQLBench Documentation Atom Feed" href=https://docs.nosqlbench.io/atom.xml rel=alternate type=application/atom+xml><meta content="index, follow" name=robots><meta content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1" name=googlebot><meta content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1" name=bingbot><title>HTTP/REST Quickstart | NoSQLBench Documentation</title><meta content="NoSQLBench Team" name=author><meta content="NoSQLBench Documentation" name=copyright><meta content="Step-by-step guide to HTTP/REST API testing with NoSQLBench and Stargate" name=description><link href=https://docs.nosqlbench.io/tutorials/workloads/http-quickstart/ rel=canonical><meta content=https://docs.nosqlbench.io/tutorials/workloads/http-quickstart/ property=og:url><meta content=https://docs.nosqlbench.io/tutorials/workloads/http-quickstart/ name=twitter:url><meta content="Step-by-step guide to HTTP/REST API testing with NoSQLBench and Stargate" property=og:description><meta content="Step-by-step guide to HTTP/REST API testing with NoSQLBench and Stargate" name=twitter:description><meta content="HTTP/REST Quickstart | NoSQLBench Documentation" property=og:title><meta content="HTTP/REST Quickstart | NoSQLBench Documentation" name=twitter:title><meta content=summary name=twitter:card><meta content="NoSQLBench Documentation" property=og:site_name><meta content=en_US property=og:locale><meta content=website property=og:type><meta content=2023-04-07 property=og:updated_time><script src="https://docs.nosqlbench.io/js/theme_button.js?h=12a31e87fcbe7a55e953" defer integrity=sha384-UBxLGgFVZtEgNzOU3WqKoFT1oILftGjShFO4WIs1dO/jK7SNyz7BMYCYt5PffTxe></script><script src="https://docs.nosqlbench.io/js/email.js?h=ee3dd742e11c5014fdef" defer integrity=sha384-y0LUfjslyVLYZvCOyhELpvKivlXAq27Vnbed54glXoe/pZSYS/Pfqghp/sQt1xcV></script><script src="https://docs.nosqlbench.io/js/codecopy.js?h=0a54f99e682443925d3a" defer integrity=sha384-qssVvPpQgISh4PFkSBGTgXEMzuFO8Hat5m1MsdkpannoByWSTpLfBe4iEVl3+RiP></script><script src="https://docs.nosqlbench.io/js/elasticlunr.min.js?h=4f648b9e42abdef9c436" defer integrity=sha384-Q8viz7rndi8MSNDtItDgVWNSrCumjepopRMlz2nElkWPRXDQAcfiZGJbrCJVXdtw></script><script src="https://docs.nosqlbench.io/search_index.en.js?h=e2df0fd710d0c807a7aa" defer integrity=sha384-nyOftseEtxo2Pc23RFR1hxsCZHtUr0xOCP7JVJ8oGIs+cnDq6GZkzCq2hWZ2cJIh></script><script src="https://docs.nosqlbench.io/js/searchjava.js?h=36b818b07e8b2b318967" defer integrity=sha384-i6K7Uy98ZLnOwn6no8sDUTeBitDmiLHOKxkcJYbjgu6vQ3hdyMQPzmeuX04BRs8J></script><noscript><link href=https://docs.nosqlbench.io/nojs.css rel=stylesheet></noscript><body><header><nav><div><big><a title="NoSQLBench Documentation" href=https://docs.nosqlbench.io></a></big></div><div><div><ul><li><a href=https://docs.nosqlbench.io/tutorials/> Tutorials </a><li><a href=https://docs.nosqlbench.io/guides/> Guides </a><li><a href=https://docs.nosqlbench.io/reference/> Reference </a><li><a href=https://docs.nosqlbench.io/explanations/> Explanations </a><li><a href=https://docs.nosqlbench.io/development/> Development </a><li><a href=https://github.com/nosqlbench/nosqlbench target=_blank> GitHub </a><li><i class="js svgs adjust" id=mode type=reset></i></ul></div><div><div><form autocomplete=off class=js id=searchbox name=goSearch><div class=searchd><input id=searchinput placeholder=Search title=Search><button class="svgs svgm search" title=Search></button></div><div class=results><div id=suggestions></div></div></form></div></div></div></nav></header><main><article><h1><a href=https://docs.nosqlbench.io/tutorials/workloads/http-quickstart/>HTTP/REST Quickstart</a></h1><h1 id=http-rest-quickstart-with-stargate>HTTP/REST Quickstart with Stargate</h1><p>Learn HTTP/REST API testing with NoSQLBench using the Stargate data gateway.<p><strong>Previous tutorial:</strong> If you haven’t completed the <a href=https://docs.nosqlbench.io/tutorials/workloads/http-quickstart/cql-quickstart.md>CQL Quickstart</a>, start there for foundational concepts.<h2 id=what-you-ll-learn>What You’ll Learn</h2><ul><li>Running NoSQLBench with the HTTP driver<li>Testing REST APIs with Stargate data gateway<li>HTTP methods: GET, POST, DELETE<li>Authentication with token generation<li>HTTP-specific workload patterns</ul><h2 id=prerequisites>Prerequisites</h2><ul><li>Docker installed (<a href=https://www.docker.com/ rel=noopener target=_blank>download</a>)<li>NoSQLBench v5.17.3 or later (<a href=https://github.com/nosqlbench/nosqlbench/releases/latest rel=noopener target=_blank>latest release</a>)<li>Basic understanding of REST APIs</ul><h2 id=setup>Setup</h2><h3 id=1-get-nosqlbench>1. Get NoSQLBench</h3><pre class=language-bash data-lang=bash style=color:#c0c5ce;background-color:#2b303b><code class=language-bash data-lang=bash><span style=color:#bf616a>curl -L -O</span><span> https://github.com/nosqlbench/nosqlbench/releases/latest/download/nb5
</span><span style=color:#bf616a>chmod</span><span> +x nb5
</span><span style=color:#bf616a>./nb5 --version
</span></code></pre><h3 id=2-clone-stargate>2. Clone Stargate</h3><p><a href=https://stargate.io/ rel=noopener target=_blank>Stargate</a> is an open-source data gateway for Cassandra.<pre class=language-bash data-lang=bash style=color:#c0c5ce;background-color:#2b303b><code class=language-bash data-lang=bash><span style=color:#bf616a>git</span><span> clone https://github.com/stargate/stargate.git
</span><span style=color:#96b5b4>cd</span><span> stargate/docker-compose/cassandra-4.0/
</span></code></pre><h3 id=3-start-stargate-services>3. Start Stargate Services</h3><pre class=language-bash data-lang=bash style=color:#c0c5ce;background-color:#2b303b><code class=language-bash data-lang=bash><span style=color:#bf616a>./start_cass_40_dev_mode.sh
</span></code></pre><p><strong>Verify services are healthy:</strong><pre class=language-bash data-lang=bash style=color:#c0c5ce;background-color:#2b303b><code class=language-bash data-lang=bash><span style=color:#bf616a>docker</span><span> ps
</span></code></pre><p>Expected output (all services should show “healthy”):<pre style=color:#c0c5ce;background-color:#2b303b><code><span>stargateio/graphqlapi:v2   Up (healthy)
</span><span>stargateio/restapi:v2      Up (healthy)
</span><span>stargateio/docsapi:v2      Up (healthy)
</span><span>stargateio/coordinator-4_0 Up (healthy)
</span></code></pre><h2 id=running-the-workload>Running the Workload</h2><h3 id=1-verify-workload-availability>1. Verify Workload Availability</h3><pre class=language-bash data-lang=bash style=color:#c0c5ce;background-color:#2b303b><code class=language-bash data-lang=bash><span style=color:#bf616a>./nb5 --list-workloads </span><span>| </span><span style=color:#bf616a>grep</span><span> http-rest-starter
</span></code></pre><p>Expected: <code>/activities/baselines/http-rest-starter.yaml</code><h3 id=2-run-the-scenario>2. Run the Scenario</h3><pre class=language-bash data-lang=bash style=color:#c0c5ce;background-color:#2b303b><code class=language-bash data-lang=bash><span style=color:#bf616a>./nb5</span><span> activities/baselines/http-rest-starter.yaml default stargate_host=localhost
</span></code></pre><p>This workload:<ol><li>Creates a keyspace via REST API<li>Drops existing table (if any)<li>Creates a new table<li>Loads rampup data (10 records)<li>Runs mixed read/write operations (10 cycles each)</ol><h2 id=understanding-the-http-workload>Understanding the HTTP Workload</h2><h3 id=workload-structure>Workload Structure</h3><pre class=language-yaml data-lang=yaml style=color:#c0c5ce;background-color:#2b303b><code class=language-yaml data-lang=yaml><span style=color:#bf616a>scenarios</span><span>:
</span><span>  </span><span style=color:#bf616a>default</span><span>:
</span><span>    </span><span style=color:#bf616a>schema</span><span>: </span><span style=color:#a3be8c>run driver=http tags==block:"schema.*" threads==1 cycles==UNDEF
</span><span>    </span><span style=color:#bf616a>rampup</span><span>: </span><span style=color:#a3be8c>run driver=http tags==block:"rampup.*" cycles===10 threads=auto
</span><span>    </span><span style=color:#bf616a>main</span><span>: </span><span style=color:#a3be8c>run driver=http tags==block:"main.*" cycles===10 threads=auto
</span><span>
</span><span style=color:#bf616a>bindings</span><span>:
</span><span>  </span><span style=color:#bf616a>request_id</span><span>: </span><span style=color:#a3be8c>ToHashedUUID(); ToString();
</span><span>  </span><span style=color:#bf616a>token</span><span>: </span><span style=color:#a3be8c>Discard(); Token('<&LTauth_token:>>',
</span><span>    '</span><span style=color:#a3be8c><&LTauth_uri:http://localhost:8081/v1/auth>></span><span>',
</span><span>    '</span><span style=color:#a3be8c><&LTauth_uid:cassandra>></span><span>',
</span><span>    '</span><span style=color:#a3be8c><&LTauth_pswd:cassandra>></span><span>'</span><span style=color:#a3be8c>);
</span><span>  </span><span style=color:#bf616a>seq_key</span><span>: </span><span style=color:#a3be8c>Mod(10000000); ToString() -> String
</span><span>  </span><span style=color:#bf616a>seq_value</span><span>: </span><span style=color:#a3be8c>Hash(); Mod(1000000000); ToString() -> String
</span><span>  </span><span style=color:#bf616a>rw_key</span><span>: </span><span style=color:#a3be8c>Uniform(0,10000000)->int; ToString() -> String
</span><span>  </span><span style=color:#bf616a>rw_value</span><span>: </span><span style=color:#a3be8c>Hash(); Uniform(0,1000000000)->int; ToString() -> String
</span></code></pre><h3 id=key-bindings>Key Bindings</h3><ul><li><strong>request_id</strong> - Unique ID for each HTTP request<li><strong>token</strong> - Auto-generated Stargate auth token using <code>Token()</code> function <ul><li>If <code>auth_token</code> is provided, uses it directly<li>Otherwise generates token via <code>auth_uri</code> with <code>auth_uid</code>/<code>auth_pswd</code></ul><li><strong>seq_key/seq_value</strong> - Sequential data for rampup<li><strong>rw_key/rw_value</strong> - Random data for read/write operations</ul><h3 id=http-operations>HTTP Operations</h3><h4 id=create-keyspace-post>Create Keyspace (POST)</h4><pre class=language-yaml data-lang=yaml style=color:#c0c5ce;background-color:#2b303b><code class=language-yaml data-lang=yaml><span style=color:#bf616a>create-keyspace</span><span>:
</span><span>  </span><span style=color:#bf616a>method</span><span>: </span><span style=color:#a3be8c>POST
</span><span>  </span><span style=color:#bf616a>uri</span><span>: </span><span style=color:#a3be8c>http://<&LTstargate_host>>:8082/v2/schemas/keyspaces
</span><span>  </span><span style=color:#bf616a>Accept</span><span>: "</span><span style=color:#a3be8c>application/json</span><span>"
</span><span>  </span><span style=color:#bf616a>X-Cassandra-Request-Id</span><span>: "</span><span style=color:#a3be8c>{request_id}</span><span>"
</span><span>  </span><span style=color:#bf616a>X-Cassandra-Token</span><span>: "</span><span style=color:#a3be8c>{token}</span><span>"
</span><span>  </span><span style=color:#bf616a>Content-Type</span><span>: "</span><span style=color:#a3be8c>application/json</span><span>"
</span><span>  </span><span style=color:#bf616a>body</span><span>: </span><span style=color:#b48ead>></span><span style=color:#d08770>2
</span><span style=color:#a3be8c>    {
</span><span style=color:#a3be8c>      "name": "starter",
</span><span style=color:#a3be8c>      "replicas": 1
</span><span style=color:#a3be8c>    }
</span></code></pre><h4 id=delete-table-delete>Delete Table (DELETE)</h4><pre class=language-yaml data-lang=yaml style=color:#c0c5ce;background-color:#2b303b><code class=language-yaml data-lang=yaml><span style=color:#bf616a>drop-table</span><span>:
</span><span>  </span><span style=color:#bf616a>method</span><span>: </span><span style=color:#a3be8c>DELETE
</span><span>  </span><span style=color:#bf616a>uri</span><span>: </span><span style=color:#a3be8c>http://<&LTstargate_host>>:8082/v2/schemas/keyspaces/starter/tables/http_rest_starter
</span><span>  </span><span style=color:#bf616a>X-Cassandra-Request-Id</span><span>: "</span><span style=color:#a3be8c>{request_id}</span><span>"
</span><span>  </span><span style=color:#bf616a>X-Cassandra-Token</span><span>: "</span><span style=color:#a3be8c>{token}</span><span>"
</span><span>  </span><span style=color:#bf616a>ok-status</span><span>: "</span><span style=color:#a3be8c>[2-4][0-9][0-9]</span><span>"  </span><span style=color:#65737e># Accept 2xx, 3xx, 4xx status codes
</span></code></pre><h4 id=create-table-post>Create Table (POST)</h4><pre class=language-yaml data-lang=yaml style=color:#c0c5ce;background-color:#2b303b><code class=language-yaml data-lang=yaml><span style=color:#bf616a>create-table</span><span>:
</span><span>  </span><span style=color:#bf616a>method</span><span>: </span><span style=color:#a3be8c>POST
</span><span>  </span><span style=color:#bf616a>uri</span><span>: </span><span style=color:#a3be8c>http://<&LTstargate_host>>:8082/v2/schemas/keyspaces/starter/tables
</span><span>  </span><span style=color:#bf616a>X-Cassandra-Token</span><span>: "</span><span style=color:#a3be8c>{token}</span><span>"
</span><span>  </span><span style=color:#bf616a>body</span><span>: </span><span style=color:#b48ead>></span><span style=color:#d08770>2
</span><span style=color:#a3be8c>    {
</span><span style=color:#a3be8c>      "name": "http_rest_starter",
</span><span style=color:#a3be8c>      "columnDefinitions": [
</span><span style=color:#a3be8c>        {"name": "key", "typeDefinition": "text"},
</span><span style=color:#a3be8c>        {"name": "value", "typeDefinition": "text"}
</span><span style=color:#a3be8c>      ],
</span><span style=color:#a3be8c>      "primaryKey": {
</span><span style=color:#a3be8c>        "partitionKey": ["key"]
</span><span style=color:#a3be8c>      },
</span><span style=color:#a3be8c>      "ifNotExists": true
</span><span style=color:#a3be8c>    }
</span></code></pre><h4 id=read-data-get>Read Data (GET)</h4><pre class=language-yaml data-lang=yaml style=color:#c0c5ce;background-color:#2b303b><code class=language-yaml data-lang=yaml><span style=color:#bf616a>main-select</span><span>:
</span><span>  </span><span style=color:#bf616a>method</span><span>: </span><span style=color:#a3be8c>GET
</span><span>  </span><span style=color:#bf616a>uri</span><span>: </span><span style=color:#a3be8c>http://<&LTstargate_host>>:8082/v2/keyspaces/starter/http_rest_starter/{rw_key}
</span><span>  </span><span style=color:#bf616a>X-Cassandra-Token</span><span>: "</span><span style=color:#a3be8c>{token}</span><span>"
</span><span>  </span><span style=color:#bf616a>ok-status</span><span>: "</span><span style=color:#a3be8c>[2-4][0-9][0-9]</span><span>"
</span></code></pre><h4 id=write-data-post>Write Data (POST)</h4><pre class=language-yaml data-lang=yaml style=color:#c0c5ce;background-color:#2b303b><code class=language-yaml data-lang=yaml><span style=color:#bf616a>main-write</span><span>:
</span><span>  </span><span style=color:#bf616a>method</span><span>: </span><span style=color:#a3be8c>POST
</span><span>  </span><span style=color:#bf616a>uri</span><span>: </span><span style=color:#a3be8c>http://<&LTstargate_host>>:8082/v2/keyspaces/starter/http_rest_starter
</span><span>  </span><span style=color:#bf616a>X-Cassandra-Token</span><span>: "</span><span style=color:#a3be8c>{token}</span><span>"
</span><span>  </span><span style=color:#bf616a>body</span><span>: </span><span style=color:#b48ead>></span><span style=color:#d08770>2
</span><span style=color:#a3be8c>    {
</span><span style=color:#a3be8c>      "key": "{rw_key}",
</span><span style=color:#a3be8c>      "value": "{rw_value}"
</span><span style=color:#a3be8c>    }
</span></code></pre><h3 id=http-methods-used>HTTP Methods Used</h3><ul><li><strong>POST</strong> - Create resources (keyspace, table, records)<li><strong>GET</strong> - Read data<li><strong>DELETE</strong> - Remove resources</ul><h3 id=table-schema>Table Schema</h3><p>Simple key-value table:<ul><li><strong>key</strong> (text) - Partition key<li><strong>value</strong> (text) - Data value</ul><h2 id=examining-results>Examining Results</h2><p>View Stargate logs:<pre class=language-bash data-lang=bash style=color:#c0c5ce;background-color:#2b303b><code class=language-bash data-lang=bash><span style=color:#bf616a>docker</span><span> container exec</span><span style=color:#bf616a> -it</span><span> cass40-stargate-coordinator-1 sh
</span><span style=color:#96b5b4>cd</span><span> /stargate/log
</span><span style=color:#bf616a>tail -100</span><span> system.log
</span></code></pre><p>You’ll see the HTTP operations executed during the workload run.<h2 id=customization>Customization</h2><h3 id=copy-the-workload>Copy the Workload</h3><pre class=language-bash data-lang=bash style=color:#c0c5ce;background-color:#2b303b><code class=language-bash data-lang=bash><span style=color:#bf616a>./nb5 --copy</span><span> http-rest-starter
</span></code></pre><h3 id=modify-scenarios>Modify Scenarios</h3><p>Edit <code>http-rest-starter.yaml</code> to adjust:<ul><li>Cycle counts for larger tests<li>Ratios for read/write mix<li>URLs for different endpoints<li>Request headers</ul><h3 id=scale-up>Scale Up</h3><pre class=language-bash data-lang=bash style=color:#c0c5ce;background-color:#2b303b><code class=language-bash data-lang=bash><span style=color:#bf616a>./nb5</span><span> ./http-rest-starter.yaml default \
</span><span>  stargate_host=localhost \
</span><span>  rampup-cycles=100000 \
</span><span>  main-cycles=1000000
</span></code></pre><h2 id=next-steps>Next Steps</h2><ul><li><strong><a href=../../reference/drivers/http.md>HTTP Driver Reference</a></strong> - Complete HTTP driver documentation<li><strong><a href=../../guides/workload-design/>Workload Design</a></strong> - Create custom HTTP workloads<li><strong><a href=../../reference/bindings/>Binding Functions</a></strong> - Advanced data generation<li><strong>More Examples</strong> - Explore Stargate examples: <ul><li>Documents API<li>GraphQL (CQL-first)<li>GraphQL (Schema-first)</ul></ul><h2 id=related-documentation>Related Documentation</h2><ul><li><strong><a href=https://docs.nosqlbench.io/tutorials/workloads/http-quickstart/cql-quickstart.md>CQL Quickstart</a></strong> - Compare with CQL driver approach<li><strong><a href=../../reference/drivers/http.md>HTTP Driver</a></strong> - HTTP driver options and features<li><strong><a href=https://stargate.io/docs/ rel=noopener target=_blank>Stargate Documentation</a></strong> - Learn more about Stargate</ul><hr><p><em>This tutorial demonstrates HTTP/REST testing using NoSQLBench with the Stargate data gateway. For direct database testing, see the <a href=https://docs.nosqlbench.io/tutorials/workloads/http-quickstart/cql-quickstart.md>CQL Quickstart</a>.</em></article></main><footer><div class=c><nav class=tpad><div></div></nav><p>© <span id=year>2025</span> NoSQLBench Documentation<p>Powered by <a href=https://www.getzola.org/ target=_blank>Zola</a> & <a href=https://github.com/jieiku/abridge/ target=_blank>Abridge</a></div></footer><span class=topout> <span class=topleft> </span><a title="Back to Top" class=top href=#><i class="svgs svgh angu"></i></a> </span>