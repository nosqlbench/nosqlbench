<!doctype html><html lang=en><head><script integrity=sha384-pb++s6uBRKaQv+iAXpgA/H3IlpLZdO14tTwuCI7uXmz4aaZdByoCcM+6BhynMq/1 src=https://docs.nosqlbench.io/js/theme.min.js></script><link href="https://docs.nosqlbench.io/abridge.css?h=17d1d14ae374495df55a" rel=stylesheet><meta charset=utf-8><meta content="ie=edge" http-equiv=x-ua-compatible><meta content="width=device-width,initial-scale=1" name=viewport><meta content=https://docs.nosqlbench.io name=base><meta content=True name=HandheldFriendly><meta content=yes name=mobile-web-app-capable><meta content=yes name=apple-mobile-web-app-capable><meta content=default name=apple-mobile-web-app-status-bar-style><link href=https://docs.nosqlbench.io/favicon.svg rel=icon type=image/svg+xml><link title="NoSQLBench Documentation Atom Feed" href=https://docs.nosqlbench.io/atom.xml rel=alternate type=application/atom+xml><meta content="index, follow" name=robots><meta content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1" name=googlebot><meta content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1" name=bingbot><title>CQL Quickstart | NoSQLBench Documentation</title><meta content="NoSQLBench Team" name=author><meta content="NoSQLBench Documentation" name=copyright><meta content="Step-by-step guide to running your first Cassandra workload with NoSQLBench" name=description><link href=https://docs.nosqlbench.io/tutorials/workloads/cql-quickstart/ rel=canonical><meta content=https://docs.nosqlbench.io/tutorials/workloads/cql-quickstart/ property=og:url><meta content=https://docs.nosqlbench.io/tutorials/workloads/cql-quickstart/ name=twitter:url><meta content="Step-by-step guide to running your first Cassandra workload with NoSQLBench" property=og:description><meta content="Step-by-step guide to running your first Cassandra workload with NoSQLBench" name=twitter:description><meta content="CQL Quickstart | NoSQLBench Documentation" property=og:title><meta content="CQL Quickstart | NoSQLBench Documentation" name=twitter:title><meta content=summary name=twitter:card><meta content="NoSQLBench Documentation" property=og:site_name><meta content=en_US property=og:locale><meta content=website property=og:type><meta content=2023-03-28 property=og:updated_time><script src="https://docs.nosqlbench.io/js/theme_button.js?h=12a31e87fcbe7a55e953" defer integrity=sha384-UBxLGgFVZtEgNzOU3WqKoFT1oILftGjShFO4WIs1dO/jK7SNyz7BMYCYt5PffTxe></script><script src="https://docs.nosqlbench.io/js/email.js?h=ee3dd742e11c5014fdef" defer integrity=sha384-y0LUfjslyVLYZvCOyhELpvKivlXAq27Vnbed54glXoe/pZSYS/Pfqghp/sQt1xcV></script><script src="https://docs.nosqlbench.io/js/codecopy.js?h=0a54f99e682443925d3a" defer integrity=sha384-qssVvPpQgISh4PFkSBGTgXEMzuFO8Hat5m1MsdkpannoByWSTpLfBe4iEVl3+RiP></script><script src="https://docs.nosqlbench.io/js/elasticlunr.min.js?h=4f648b9e42abdef9c436" defer integrity=sha384-Q8viz7rndi8MSNDtItDgVWNSrCumjepopRMlz2nElkWPRXDQAcfiZGJbrCJVXdtw></script><script src="https://docs.nosqlbench.io/search_index.en.js?h=e2df0fd710d0c807a7aa" defer integrity=sha384-nyOftseEtxo2Pc23RFR1hxsCZHtUr0xOCP7JVJ8oGIs+cnDq6GZkzCq2hWZ2cJIh></script><script src="https://docs.nosqlbench.io/js/searchjava.js?h=36b818b07e8b2b318967" defer integrity=sha384-i6K7Uy98ZLnOwn6no8sDUTeBitDmiLHOKxkcJYbjgu6vQ3hdyMQPzmeuX04BRs8J></script><noscript><link href=https://docs.nosqlbench.io/nojs.css rel=stylesheet></noscript><body><header><nav><div><big><a title="NoSQLBench Documentation" href=https://docs.nosqlbench.io></a></big></div><div><div><ul><li><a href=https://docs.nosqlbench.io/tutorials/> Tutorials </a><li><a href=https://docs.nosqlbench.io/guides/> Guides </a><li><a href=https://docs.nosqlbench.io/reference/> Reference </a><li><a href=https://docs.nosqlbench.io/explanations/> Explanations </a><li><a href=https://docs.nosqlbench.io/development/> Development </a><li><a href=https://github.com/nosqlbench/nosqlbench target=_blank> GitHub </a><li><i class="js svgs adjust" id=mode type=reset></i></ul></div><div><div><form autocomplete=off class=js id=searchbox name=goSearch><div class=searchd><input id=searchinput placeholder=Search title=Search><button class="svgs svgm search" title=Search></button></div><div class=results><div id=suggestions></div></div></form></div></div></div></nav></header><main><article><h1><a href=https://docs.nosqlbench.io/tutorials/workloads/cql-quickstart/>CQL Quickstart</a></h1><h1 id=cql-quickstart>CQL Quickstart</h1><p>Welcome to the NoSQLBench Quick Byte, the first session in a “Getting Started” series for NoSQLBench. This session introduces the Cassandra Query Language (CQL) starter workload available in NoSQLBench v5.<h2 id=what-you-ll-learn>What You’ll Learn</h2><ul><li>Setting up a Cassandra test environment with Docker<li>Running a pre-built NoSQLBench workload<li>Understanding workload structure (scenarios, bindings, blocks)<li>Customizing workloads for your needs</ul><h2 id=prerequisites>Prerequisites</h2><ul><li>Docker installed (<a href=https://www.docker.com/ rel=noopener target=_blank>download here</a>)<li>NoSQLBench v5.17.2 or later (<a href=https://github.com/nosqlbench/nosqlbench/releases/latest rel=noopener target=_blank>latest release</a>)<li>Basic command-line familiarity</ul><h2 id=setup>Setup</h2><h3 id=1-get-nosqlbench>1. Get NoSQLBench</h3><p>Download the latest NB5 release:<pre class=language-bash data-lang=bash style=color:#c0c5ce;background-color:#2b303b><code class=language-bash data-lang=bash><span style=color:#65737e># Download from GitHub releases
</span><span style=color:#bf616a>wget</span><span> https://github.com/nosqlbench/nosqlbench/releases/latest/download/nb5
</span><span style=color:#bf616a>chmod</span><span> +x nb5
</span><span>
</span><span style=color:#65737e># Verify installation
</span><span style=color:#bf616a>./nb5 --version
</span></code></pre><p>See <a href=../getting-started/installation.md>Installation</a> for other download options.<h3 id=2-run-cassandra>2. Run Cassandra</h3><p>Start Cassandra 4.x using Docker:<pre class=language-bash data-lang=bash style=color:#c0c5ce;background-color:#2b303b><code class=language-bash data-lang=bash><span style=color:#bf616a>docker</span><span> run</span><span style=color:#bf616a> --name</span><span> cass4</span><span style=color:#bf616a> -p</span><span> 9042:9042</span><span style=color:#bf616a> -d</span><span> cassandra
</span></code></pre><p>Verify Cassandra is running:<pre class=language-bash data-lang=bash style=color:#c0c5ce;background-color:#2b303b><code class=language-bash data-lang=bash><span style=color:#bf616a>docker</span><span> container logs cass4
</span></code></pre><p>Wait for the log message indicating Cassandra is ready to accept connections.<h2 id=running-the-workload>Running the Workload</h2><h3 id=1-verify-the-workload>1. Verify the Workload</h3><p>Check that the cql-starter workload is available:<pre class=language-bash data-lang=bash style=color:#c0c5ce;background-color:#2b303b><code class=language-bash data-lang=bash><span style=color:#bf616a>./nb5 --list-workloads </span><span>| </span><span style=color:#bf616a>grep</span><span> cql-starter
</span></code></pre><p>Expected output:<pre style=color:#c0c5ce;background-color:#2b303b><code><span>/activities/baselines/cql-starter.yaml
</span></code></pre><h3 id=2-run-the-default-scenario>2. Run the Default Scenario</h3><p>Execute the workload with the default scenario:<pre class=language-bash data-lang=bash style=color:#c0c5ce;background-color:#2b303b><code class=language-bash data-lang=bash><span style=color:#bf616a>./nb5</span><span> activities/baselines/cql-starter.yaml default hosts=localhost localdc=datacenter1
</span></code></pre><p>This command:<ul><li>Loads the <code>cql-starter.yaml</code> workload<li>Runs the <code>default</code> scenario<li>Connects to Cassandra at <code>localhost:9042</code><li>Uses <code>datacenter1</code> as the local datacenter</ul><h3 id=3-examine-the-results>3. Examine the Results</h3><p>Connect to Cassandra and view the generated data:<pre class=language-bash data-lang=bash style=color:#c0c5ce;background-color:#2b303b><code class=language-bash data-lang=bash><span style=color:#bf616a>docker</span><span> container exec</span><span style=color:#bf616a> -it</span><span> cass4 cqlsh
</span></code></pre><pre class=language-cql data-lang=cql style=color:#c0c5ce;background-color:#2b303b><code class=language-cql data-lang=cql><span>SELECT * FROM starter.cqlstarter;
</span></code></pre><p>You should see data inserted by the workload with UUIDs, messages, and timestamps.<h2 id=understanding-the-workload>Understanding the Workload</h2><p>The cql-starter workload demonstrates the core structure of NoSQLBench workload templates.<h3 id=workload-structure>Workload Structure</h3><pre class=language-yaml data-lang=yaml style=color:#c0c5ce;background-color:#2b303b><code class=language-yaml data-lang=yaml><span style=color:#bf616a>description</span><span>: </span><span style=color:#b48ead>></span><span style=color:#d08770>2
</span><span style=color:#a3be8c>  A cql-starter workload.
</span><span style=color:#a3be8c>  * Cassandra: 3.x, 4.x.
</span><span style=color:#a3be8c>  * DataStax Enterprise: 6.8.x.
</span><span style=color:#a3be8c>  * DataStax Astra.
</span><span style=color:#a3be8c>
</span><span style=color:#bf616a>scenarios</span><span>:
</span><span>  </span><span style=color:#bf616a>default</span><span>:
</span><span>    </span><span style=color:#bf616a>schema</span><span>: </span><span style=color:#a3be8c>run driver=cql tags==block:schema threads==1 cycles==UNDEF
</span><span>    </span><span style=color:#bf616a>rampup</span><span>: </span><span style=color:#a3be8c>run driver=cql tags==block:rampup cycles===TEMPLATE(rampup-cycles,1) threads=auto
</span><span>    </span><span style=color:#bf616a>main</span><span>: </span><span style=color:#a3be8c>run driver=cql tags==block:"main.*" cycles===TEMPLATE(main-cycles,10) threads=auto
</span><span>
</span><span style=color:#bf616a>params</span><span>:
</span><span>  </span><span style=color:#bf616a>a_param</span><span>: "</span><span style=color:#a3be8c>value</span><span>"
</span><span>
</span><span style=color:#bf616a>bindings</span><span>:
</span><span>  </span><span style=color:#bf616a>machine_id</span><span>: </span><span style=color:#a3be8c>ElapsedNanoTime(); ToHashedUUID() -> java.util.UUID
</span><span>  </span><span style=color:#bf616a>message</span><span>: </span><span style=color:#a3be8c>Discard(); TextOfFile('data/cql-starter-message.txt');
</span><span>  </span><span style=color:#bf616a>time</span><span>: </span><span style=color:#a3be8c>ElapsedNanoTime(); Mul(1000); ToJavaInstant();
</span><span>  </span><span style=color:#bf616a>ts</span><span>: </span><span style=color:#a3be8c>ElapsedNanoTime(); Mul(1000);
</span><span>
</span><span style=color:#bf616a>blocks</span><span>:
</span><span>  </span><span style=color:#bf616a>schema</span><span>:
</span><span>    </span><span style=color:#bf616a>ops</span><span>:
</span><span>      </span><span style=color:#bf616a>create-keyspace</span><span>: </span><span style=color:#b48ead>|
</span><span style=color:#a3be8c>        CREATE KEYSPACE IF NOT EXISTS <&LTkeyspace:starter>>
</span><span style=color:#a3be8c>        WITH replication = {'class': 'SimpleStrategy', 'replication_factor': '<&LTrf:1>>'}
</span><span style=color:#a3be8c>
</span><span>      </span><span style=color:#bf616a>create-table</span><span>: </span><span style=color:#b48ead>|
</span><span style=color:#a3be8c>        CREATE TABLE IF NOT EXISTS <&LTkeyspace:starter>>.<&LTtable:cqlstarter>> (
</span><span style=color:#a3be8c>          machine_id UUID,
</span><span style=color:#a3be8c>          message text,
</span><span style=color:#a3be8c>          time timestamp,
</span><span style=color:#a3be8c>          PRIMARY KEY ((machine_id), time)
</span><span style=color:#a3be8c>        ) WITH CLUSTERING ORDER BY (time DESC);
</span><span style=color:#a3be8c>
</span><span>  </span><span style=color:#bf616a>rampup</span><span>:
</span><span>    </span><span style=color:#bf616a>params</span><span>:
</span><span>      </span><span style=color:#bf616a>cl</span><span>: </span><span style=color:#a3be8c><&LTwrite_cl:LOCAL_QUORUM>>
</span><span>    </span><span style=color:#bf616a>ops</span><span>:
</span><span>      </span><span style=color:#bf616a>insert-rampup</span><span>: </span><span style=color:#b48ead>|
</span><span style=color:#a3be8c>        INSERT INTO <&LTkeyspace:starter>>.<&LTtable:cqlstarter>> (machine_id, message, time)
</span><span style=color:#a3be8c>        VALUES ({machine_id}, {rampup_message}, {time}) USING TIMESTAMP {ts};
</span><span style=color:#a3be8c>
</span><span>  </span><span style=color:#bf616a>main-read</span><span>:
</span><span>    </span><span style=color:#bf616a>params</span><span>:
</span><span>      </span><span style=color:#bf616a>ratio</span><span>: </span><span style=color:#a3be8c><&LTread_ratio:1>>
</span><span>      </span><span style=color:#bf616a>cl</span><span>: </span><span style=color:#a3be8c><&LTread_cl:LOCAL_QUORUM>>
</span><span>    </span><span style=color:#bf616a>ops</span><span>:
</span><span>      </span><span style=color:#bf616a>select-read</span><span>: </span><span style=color:#b48ead>|
</span><span style=color:#a3be8c>        SELECT * FROM <&LTkeyspace:starter>>.<&LTtable:cqlstarter>>
</span><span style=color:#a3be8c>        WHERE machine_id={machine_id};
</span><span style=color:#a3be8c>
</span><span>  </span><span style=color:#bf616a>main-write</span><span>:
</span><span>    </span><span style=color:#bf616a>params</span><span>:
</span><span>      </span><span style=color:#bf616a>ratio</span><span>: </span><span style=color:#a3be8c><&LTwrite_ratio:9>>
</span><span>      </span><span style=color:#bf616a>cl</span><span>: </span><span style=color:#a3be8c><&LTwrite_cl:LOCAL_QUORUM>>
</span><span>    </span><span style=color:#bf616a>ops</span><span>:
</span><span>      </span><span style=color:#bf616a>insert-main</span><span>: </span><span style=color:#b48ead>|
</span><span style=color:#a3be8c>        INSERT INTO <&LTkeyspace:starter>>.<&LTtable:cqlstarter>>
</span><span style=color:#a3be8c>        (machine_id, message, time) VALUES ({machine_id}, {message}, {time})
</span><span style=color:#a3be8c>        USING TIMESTAMP {ts};
</span></code></pre><h3 id=key-concepts>Key Concepts</h3><p><strong>Scenarios</strong> define execution phases:<ul><li><code>schema</code> - Create keyspace and tables<li><code>rampup</code> - Load initial data (not measured)<li><code>main</code> - Run measured workload</ul><p><strong>Bindings</strong> generate synthetic data:<ul><li><code>machine_id</code> - UUID from elapsed nanoseconds<li><code>message</code> - Text loaded from external file<li><code>time</code> - Timestamp from elapsed time</ul><p><strong>Blocks</strong> contain CQL operations:<ul><li>Template variables: <code><&LTkeyspace:starter>></code><li>Binding references: <code>{machine_id}</code><li>Ratios: <code>ratio: <&LTwrite_ratio:9>></code> (90% writes, 10% reads)</ul><p><strong>Parameters</strong> make workloads configurable:<ul><li><code>TEMPLATE(rampup-cycles,1)</code> - Default to 1 cycle<li><code><&LTrf:1>></code> - Replication factor default to 1</ul><h2 id=customization>Customization</h2><h3 id=copy-the-workload>Copy the Workload</h3><p>Create your own copy to customize:<pre class=language-bash data-lang=bash style=color:#c0c5ce;background-color:#2b303b><code class=language-bash data-lang=bash><span style=color:#bf616a>./nb5 --copy</span><span> cql-starter
</span></code></pre><p>This creates a local <code>cql-starter.yaml</code> file you can edit.<h3 id=modify-scenarios>Modify Scenarios</h3><p>Edit the file to uncomment the rampdown phase:<pre class=language-yaml data-lang=yaml style=color:#c0c5ce;background-color:#2b303b><code class=language-yaml data-lang=yaml><span style=color:#bf616a>scenarios</span><span>:
</span><span>  </span><span style=color:#bf616a>default</span><span>:
</span><span>    </span><span style=color:#bf616a>schema</span><span>: </span><span style=color:#a3be8c>run driver=cql tags==block:schema threads==1 cycles==UNDEF
</span><span>    </span><span style=color:#bf616a>rampup</span><span>: </span><span style=color:#a3be8c>run driver=cql tags==block:rampup cycles===TEMPLATE(rampup-cycles,1) threads=auto
</span><span>    </span><span style=color:#bf616a>main</span><span>: </span><span style=color:#a3be8c>run driver=cql tags==block:"main.*" cycles===TEMPLATE(main-cycles,10) threads=auto
</span><span>    </span><span style=color:#bf616a>rampdown</span><span>: </span><span style=color:#a3be8c>run driver=cql tags==block:rampdown threads==1 cycles==UNDEF  </span><span style=color:#65737e># Uncommented
</span></code></pre><h3 id=run-custom-workload>Run Custom Workload</h3><pre class=language-bash data-lang=bash style=color:#c0c5ce;background-color:#2b303b><code class=language-bash data-lang=bash><span style=color:#bf616a>./nb5</span><span> ./cql-starter.yaml default hosts=localhost localdc=datacenter1
</span></code></pre><h3 id=add-verbosity>Add Verbosity</h3><p>See more details with verbose flags:<pre class=language-bash data-lang=bash style=color:#c0c5ce;background-color:#2b303b><code class=language-bash data-lang=bash><span style=color:#bf616a>./nb5</span><span> ./cql-starter.yaml default hosts=localhost localdc=datacenter1</span><span style=color:#bf616a> -vv
</span></code></pre><p>Verbosity levels:<ul><li><code>-v</code> - Info level<li><code>-vv</code> - Debug level<li><code>-vvv</code> - Trace level</ul><h3 id=scale-up>Scale Up</h3><p>For real testing, increase cycles significantly:<pre class=language-bash data-lang=bash style=color:#c0c5ce;background-color:#2b303b><code class=language-bash data-lang=bash><span style=color:#bf616a>./nb5</span><span> ./cql-starter.yaml default \
</span><span>  hosts=localhost \
</span><span>  localdc=datacenter1 \
</span><span>  rampup-cycles=1000000 \
</span><span>  main-cycles=10000000
</span></code></pre><h2 id=next-steps>Next Steps</h2><p>Now that you’ve run your first CQL workload:<ol><li><strong><a href=../../reference/bindings/>Explore Binding Functions</a></strong> - Learn about data generation<li><strong><a href=../../reference/workload-yaml/>Understand Workload Structure</a></strong> - Deep dive into YAML specification<li><strong><a href=../../guides/workload-design/>Create Custom Workloads</a></strong> - Design your own test scenarios<li><strong><a href=https://docs.nosqlbench.io/tutorials/workloads/cql-quickstart/http-quickstart.md>HTTP Quickstart</a></strong> - Try HTTP/REST testing</ol><h2 id=want-to-contribute>Want to Contribute?</h2><p>NoSQLBench is open source! See our <a href=../../development/contributing.md>Contributing Guide</a> to get involved.<hr><p><em>This tutorial uses the cql-starter workload included with NoSQLBench. The workload is designed for local testing with minimal cycles. For production-scale testing, increase cycle counts significantly.</em></article></main><footer><div class=c><nav class=tpad><div></div></nav><p>© <span id=year>2025</span> NoSQLBench Documentation<p>Powered by <a href=https://www.getzola.org/ target=_blank>Zola</a> & <a href=https://github.com/jieiku/abridge/ target=_blank>Abridge</a></div></footer><span class=topout> <span class=topleft> </span><a title="Back to Top" class=top href=#><i class="svgs svgh angu"></i></a> </span>