<!doctype html><html lang=en><head><script integrity=sha384-pb++s6uBRKaQv+iAXpgA/H3IlpLZdO14tTwuCI7uXmz4aaZdByoCcM+6BhynMq/1 src=https://docs.nosqlbench.io/js/theme.min.js></script><link href="https://docs.nosqlbench.io/abridge.css?h=17d1d14ae374495df55a" rel=stylesheet><meta charset=utf-8><meta content="ie=edge" http-equiv=x-ua-compatible><meta content="width=device-width,initial-scale=1" name=viewport><meta content=https://docs.nosqlbench.io name=base><meta content=True name=HandheldFriendly><meta content=yes name=mobile-web-app-capable><meta content=yes name=apple-mobile-web-app-capable><meta content=default name=apple-mobile-web-app-status-bar-style><link href=https://docs.nosqlbench.io/favicon.svg rel=icon type=image/svg+xml><link title="NoSQLBench Documentation Atom Feed" href=https://docs.nosqlbench.io/atom.xml rel=alternate type=application/atom+xml><meta content="index, follow" name=robots><meta content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1" name=googlebot><meta content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1" name=bingbot><title>Workload Template Layout | NoSQLBench Documentation</title><meta content="NoSQLBench Team" name=author><meta content="NoSQLBench Documentation" name=copyright><meta content="Understanding the standard structure and workflow of workload templates" name=description><link href=https://docs.nosqlbench.io/tutorials/workload-basics/02-workload-template-layout/ rel=canonical><meta content=https://docs.nosqlbench.io/tutorials/workload-basics/02-workload-template-layout/ property=og:url><meta content=https://docs.nosqlbench.io/tutorials/workload-basics/02-workload-template-layout/ name=twitter:url><meta content="Understanding the standard structure and workflow of workload templates" property=og:description><meta content="Understanding the standard structure and workflow of workload templates" name=twitter:description><meta content="Workload Template Layout | NoSQLBench Documentation" property=og:title><meta content="Workload Template Layout | NoSQLBench Documentation" name=twitter:title><meta content=summary name=twitter:card><meta content="NoSQLBench Documentation" property=og:site_name><meta content=en_US property=og:locale><meta content=website property=og:type><meta property=og:updated_time><script src="https://docs.nosqlbench.io/js/theme_button.js?h=12a31e87fcbe7a55e953" defer integrity=sha384-UBxLGgFVZtEgNzOU3WqKoFT1oILftGjShFO4WIs1dO/jK7SNyz7BMYCYt5PffTxe></script><script src="https://docs.nosqlbench.io/js/email.js?h=ee3dd742e11c5014fdef" defer integrity=sha384-y0LUfjslyVLYZvCOyhELpvKivlXAq27Vnbed54glXoe/pZSYS/Pfqghp/sQt1xcV></script><script src="https://docs.nosqlbench.io/js/codecopy.js?h=0a54f99e682443925d3a" defer integrity=sha384-qssVvPpQgISh4PFkSBGTgXEMzuFO8Hat5m1MsdkpannoByWSTpLfBe4iEVl3+RiP></script><script src="https://docs.nosqlbench.io/js/elasticlunr.min.js?h=4f648b9e42abdef9c436" defer integrity=sha384-Q8viz7rndi8MSNDtItDgVWNSrCumjepopRMlz2nElkWPRXDQAcfiZGJbrCJVXdtw></script><script src="https://docs.nosqlbench.io/search_index.en.js?h=e2df0fd710d0c807a7aa" defer integrity=sha384-nyOftseEtxo2Pc23RFR1hxsCZHtUr0xOCP7JVJ8oGIs+cnDq6GZkzCq2hWZ2cJIh></script><script src="https://docs.nosqlbench.io/js/searchjava.js?h=36b818b07e8b2b318967" defer integrity=sha384-i6K7Uy98ZLnOwn6no8sDUTeBitDmiLHOKxkcJYbjgu6vQ3hdyMQPzmeuX04BRs8J></script><noscript><link href=https://docs.nosqlbench.io/nojs.css rel=stylesheet></noscript><body><header><nav><div><big><a title="NoSQLBench Documentation" href=https://docs.nosqlbench.io></a></big></div><div><div><ul><li><a href=https://docs.nosqlbench.io/tutorials/> Tutorials </a><li><a href=https://docs.nosqlbench.io/guides/> Guides </a><li><a href=https://docs.nosqlbench.io/reference/> Reference </a><li><a href=https://docs.nosqlbench.io/explanations/> Explanations </a><li><a href=https://docs.nosqlbench.io/development/> Development </a><li><a href=https://github.com/nosqlbench/nosqlbench target=_blank> GitHub </a><li><i class="js svgs adjust" id=mode type=reset></i></ul></div><div><div><form autocomplete=off class=js id=searchbox name=goSearch><div class=searchd><input id=searchinput placeholder=Search title=Search><button class="svgs svgm search" title=Search></button></div><div class=results><div id=suggestions></div></div></form></div></div></div></nav></header><main><article><h1><a href=https://docs.nosqlbench.io/tutorials/workload-basics/02-workload-template-layout/>Workload Template Layout</a></h1><p>It is best to keep every workload template self-contained within a single YAML file, including schema, rampup, and the main steps in your testing workflow. These steps in a typical testing workflow are controlled by tags as described below.<p>ðŸ‘‰ The step names described below have been adopted as a convention within the built-in workloads templates. It is strongly advised that new workload templates use the same naming scheme so that they are easier to re-use..<h1 id=automatic-tags>Automatic tags</h1><p>To make tag filters more useful, every op template in NoSQLBench is given a set of automatic tags based on the block and op template names:<ul><li>block: &LTblockname><li>name: &LTblockname>â€“&LTop name></ul><p>For example, if you had a block named <code>block42</code> and an op named <code>op007</code>, then you would be able to match it with <code>tags=block:block42</code>, or <code>tags=name:block42--op007</code>, or any regex which also matched. The difference between the first example and the second is this: There is only one op template which will have the name shown, but multiple statements could be in block42. <sup class=footnote-reference><a href=#1>1</a></sup><p>ðŸ‘‰ In previous versions of NoSQLBench, you had to add tags directly to your docs, blocks, or op templates. This is still supported if you need, but most cases will only require that you group statements together in named blocks. When used with the regex matching pattern demonstrated above, you get quite a bit of flexibility without having to create boilerplate tags everywhere.<h1 id=a-standard-workflow>A Standard Workflow</h1><p>These steps are <em>very</em> commonly used by nb5 users. The standard test workflow described here is understood as <a href=https://en.wikipedia.org/wiki/Lingua_franca rel=noopener target=_blank>lingua franca</a> for seasoned NoSQLBench users.<h2 id=schema-step>Schema step</h2><p>The schema step is simply where you create the necessary schema on your target system. For CQL, this generally consists of a keyspace and one or more table statements. There is no special schema layer in NoSQLBench. All statements executed are simply statements. This provides the greatest flexibility in testing since every activity type is allowed to control its DDL and DML using the same machinery.<p>The schema step is normally executed with defaults for most parameters. This means that operations will execute in the order specified in the workload template, serially, exactly once. This is a welcome side effect of how the initial parameters like <em>cycles</em> are set from the op templates which are activated by tagging.<p>The nb5 way of selecting all op templates in a block is to use the built-in block name in a tag filter, like this:<pre class=language-shell data-lang=shell style=color:#c0c5ce;background-color:#2b303b><code class=language-shell data-lang=shell><span># select all op templates in the block named schema
</span><span>./nb5 ... tags=block:schema ...
</span><span>
</span><span># select all op templates in all blocks that have a name matching the regex
</span><span>./nb5 ... tags='block:schema-.*'
</span></code></pre><h2 id=rampup-step>Rampup step</h2><p>When you run a performance test, it is very important to be aware of how much data is present. Higher density tests are more realistic for systems which accumulate data over time, or which accumulate a larger working set every day. The amount of data on the system you are testing should recreate a realistic amount of data that you would run in production.<p>It is the purpose of the <em>rampup</em> activity is to create the backdrop data on a target system that makes a test meaningful for some level of data density. Data density is normally discussed as average per node, but it is also important to consider distribution of data as it varies from the least dense to the most dense nodes in your target system.<p>Because it is useful to be able to add data to a target system in an incremental way, the bindings which are used with a <em>rampup</em> step may actually be different from the ones used for a <em>main</em> step. In most cases, you want the <em>rampup</em> step to create data in a way that incrementally adds to the working set. This allows you to add some data to a cluster with <code>cycles=0..1M</code> and then decide whether to continue adding data using the next contiguous range of cycles, with <code>cycles=1M..2M</code> and so on.<h2 id=main-step>Main step</h2><p>The main step of a performance testing scenario is the one during which you really care about recording the metrics. This is the actual test that everything else has prepared your system for.<p>You will want to run your main workload for a significant amount of time. This doesnâ€™t mean a <em>long</em> time, but it may. What is significant in terms of getting realistic results is a question of statistical significance. If you have a very small system which you can push into steady-state performance in 20 minutes, then 30 minutes may be enough testing time. However, most modern systems of scale, even with a few nodes, will take longer to get reasonably accurate measurements. It depends on how you are measuring.<div class=footnote-definition id=1><sup class=footnote-definition-label>1</sup><p>All block names must be unique and all op names within a block must be unique.</div></article></main><footer><div class=c><nav class=tpad><div></div></nav><p>Â© <span id=year>2025</span> NoSQLBench Documentation<p>Powered by <a href=https://www.getzola.org/ target=_blank>Zola</a> & <a href=https://github.com/jieiku/abridge/ target=_blank>Abridge</a></div></footer><span class=topout> <span class=topleft> </span><a title="Back to Top" class=top href=#><i class="svgs svgh angu"></i></a> </span>