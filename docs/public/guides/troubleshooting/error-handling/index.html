<!doctype html><html lang=en><head><script integrity=sha384-pb++s6uBRKaQv+iAXpgA/H3IlpLZdO14tTwuCI7uXmz4aaZdByoCcM+6BhynMq/1 src=https://docs.nosqlbench.io/js/theme.min.js></script><link href="https://docs.nosqlbench.io/abridge.css?h=17d1d14ae374495df55a" rel=stylesheet><meta charset=utf-8><meta content="ie=edge" http-equiv=x-ua-compatible><meta content="width=device-width,initial-scale=1" name=viewport><meta content=https://docs.nosqlbench.io name=base><meta content=True name=HandheldFriendly><meta content=yes name=mobile-web-app-capable><meta content=yes name=apple-mobile-web-app-capable><meta content=default name=apple-mobile-web-app-status-bar-style><link href=https://docs.nosqlbench.io/favicon.svg rel=icon type=image/svg+xml><link title="NoSQLBench Documentation Atom Feed" href=https://docs.nosqlbench.io/atom.xml rel=alternate type=application/atom+xml><meta content="index, follow" name=robots><meta content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1" name=googlebot><meta content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1" name=bingbot><title>Error Handling | NoSQLBench Documentation</title><meta content="NoSQLBench Team" name=author><meta content="NoSQLBench Documentation" name=copyright><meta content="Configure error handlers to control how NoSQLBench responds to exceptions" name=description><link href=https://docs.nosqlbench.io/guides/troubleshooting/error-handling/ rel=canonical><meta content=https://docs.nosqlbench.io/guides/troubleshooting/error-handling/ property=og:url><meta content=https://docs.nosqlbench.io/guides/troubleshooting/error-handling/ name=twitter:url><meta content="Configure error handlers to control how NoSQLBench responds to exceptions" property=og:description><meta content="Configure error handlers to control how NoSQLBench responds to exceptions" name=twitter:description><meta content="Error Handling | NoSQLBench Documentation" property=og:title><meta content="Error Handling | NoSQLBench Documentation" name=twitter:title><meta content=summary name=twitter:card><meta content="NoSQLBench Documentation" property=og:site_name><meta content=en_US property=og:locale><meta content=website property=og:type><meta property=og:updated_time><script src="https://docs.nosqlbench.io/js/theme_button.js?h=12a31e87fcbe7a55e953" defer integrity=sha384-UBxLGgFVZtEgNzOU3WqKoFT1oILftGjShFO4WIs1dO/jK7SNyz7BMYCYt5PffTxe></script><script src="https://docs.nosqlbench.io/js/email.js?h=ee3dd742e11c5014fdef" defer integrity=sha384-y0LUfjslyVLYZvCOyhELpvKivlXAq27Vnbed54glXoe/pZSYS/Pfqghp/sQt1xcV></script><script src="https://docs.nosqlbench.io/js/codecopy.js?h=0a54f99e682443925d3a" defer integrity=sha384-qssVvPpQgISh4PFkSBGTgXEMzuFO8Hat5m1MsdkpannoByWSTpLfBe4iEVl3+RiP></script><script src="https://docs.nosqlbench.io/js/elasticlunr.min.js?h=4f648b9e42abdef9c436" defer integrity=sha384-Q8viz7rndi8MSNDtItDgVWNSrCumjepopRMlz2nElkWPRXDQAcfiZGJbrCJVXdtw></script><script src="https://docs.nosqlbench.io/search_index.en.js?h=e2df0fd710d0c807a7aa" defer integrity=sha384-nyOftseEtxo2Pc23RFR1hxsCZHtUr0xOCP7JVJ8oGIs+cnDq6GZkzCq2hWZ2cJIh></script><script src="https://docs.nosqlbench.io/js/searchjava.js?h=36b818b07e8b2b318967" defer integrity=sha384-i6K7Uy98ZLnOwn6no8sDUTeBitDmiLHOKxkcJYbjgu6vQ3hdyMQPzmeuX04BRs8J></script><noscript><link href=https://docs.nosqlbench.io/nojs.css rel=stylesheet></noscript><body><header><nav><div><big><a title="NoSQLBench Documentation" href=https://docs.nosqlbench.io></a></big></div><div><div><ul><li><a href=https://docs.nosqlbench.io/tutorials/> Tutorials </a><li><a href=https://docs.nosqlbench.io/guides/> Guides </a><li><a href=https://docs.nosqlbench.io/reference/> Reference </a><li><a href=https://docs.nosqlbench.io/explanations/> Explanations </a><li><a href=https://docs.nosqlbench.io/development/> Development </a><li><a href=https://github.com/nosqlbench/nosqlbench target=_blank> GitHub </a><li><i class="js svgs adjust" id=mode type=reset></i></ul></div><div><div><form autocomplete=off class=js id=searchbox name=goSearch><div class=searchd><input id=searchinput placeholder=Search title=Search><button class="svgs svgm search" title=Search></button></div><div class=results><div id=suggestions></div></div></form></div></div></div></nav></header><main><article><h1><a href=https://docs.nosqlbench.io/guides/troubleshooting/error-handling/>Error Handling</a></h1><h1 id=error-handling>Error Handling</h1><p>NoSQLBench provides a standard error handler mechanism available to all drivers. This guide shows how to configure error handling for your workloads.<h2 id=default-behavior>Default Behavior</h2><p>If no error handler is configured, the default is:<pre class=language-bash data-lang=bash style=color:#c0c5ce;background-color:#2b303b><code class=language-bash data-lang=bash><span style=color:#bf616a>errors</span><span>=</span><span style=color:#a3be8c>stop
</span></code></pre><p>This is a <strong>fail-fast default</strong> - any error thrown by an activity will cause it to stop. It’s the simplest possible error handler configuration.<h2 id=handler-verbs>Handler Verbs</h2><p>The following handler verbs control how errors are processed:<h3 id=available-verbs>Available Verbs</h3><ul><li><strong>ignore</strong> - Silently ignore the error. Won’t be retried unless combined with <code>retry</code>.<li><strong>counter</strong> - Count each uniquely named error with a counter metric.<li><strong>histogram</strong> - Track session time of each uniquely named error with a histogram.<li><strong>meter</strong> - Meter each uniquely named error with a meter metric.<li><strong>retry</strong> - Mark error as retryable. If activity has retries available, operation will be retried. Default: <code>maxtries=10</code>.<li><strong>stop</strong> - Allow error to propagate and cause activity to stop.<li><strong>timer</strong> - Combine counter, meter, and histogram for comprehensive error tracking.<li><strong>warn</strong> - Log a warning with error details.<li><strong>code</strong> - Assign specific result code to matching errors. Shorthand: use just a number like <code>errors=RuntimeException:33,warn</code></ul><p><strong>You can use any verbs in any order in a handler list.</strong><h2 id=handler-chain-structure>Handler Chain Structure</h2><p>The error handler is a <strong>list of lists</strong>:<ul><li><strong>Handler Chain</strong> - Top level (entire configuration)<li><strong>Handler List</strong> - Individual entry in the chain<li><strong>Handler Verbs</strong> - Actions within a handler list</ul><p><strong>Matching:</strong> The first matching handler list is used. When an exception is thrown, the chain is walked until a match is found. If none match, no handlers apply (same as <code>ignore</code>).<p><strong>Default handler:</strong> To apply handlers to unmatched exceptions, add <code>.*</code> at the end.<h3 id=visual-example>Visual Example</h3><pre style=color:#c0c5ce;background-color:#2b303b><code><span>errors=Invalid.*:ignore;Runtime.*:warn,histogram;counter,42
</span><span>
</span><span>                     |-----------|-----------|-----------|
</span><span>handler chain ==>    | 1         | 2         | 3         |
</span><span>                     |===========|===========|===========|
</span><span>error patterns ==>   | Invalid.* | Runtime.* | .*        |
</span><span>                     |===========|===========|===========|
</span><span>handler verbs ==>    | ignore    | warn      | counter   |
</span><span>                     |-----------| histogram | 42        |
</span><span>                                 |-----------|-----------|
</span></code></pre><p><strong>Execution:</strong><ol><li>Exception thrown<li>Match exception class name against patterns (left to right)<li>First match selects handler list<li>Apply all verbs in that list in order</ol><h2 id=configuration-syntax>Configuration Syntax</h2><h3 id=shorthand-forms>Shorthand Forms</h3><p><code>errors=stop</code> is shorthand for <code>errors=.*:stop</code> (default wildcard pattern).<p>If error patterns aren’t provided, the default wildcard <code>.*:</code> is automatically prepended.<h3 id=error-pattern-format>Error Pattern Format</h3><p>Error patterns are <strong>regular expressions</strong> with limited character set: <code>[a-zA-Z0-9.-_*+]</code><p><strong>Multiple patterns:</strong><pre class=language-bash data-lang=bash style=color:#c0c5ce;background-color:#2b303b><code class=language-bash data-lang=bash><span style=color:#bf616a>errors</span><span>='</span><span style=color:#a3be8c>Missing.*,RuntimeEx.*:counter,warn</span><span>'
</span></code></pre><h3 id=handler-verb-formats>Handler Verb Formats</h3><p><strong>Basic verb-only:</strong><pre class=language-bash data-lang=bash style=color:#c0c5ce;background-color:#2b303b><code class=language-bash data-lang=bash><span style=color:#bf616a>errors</span><span>=</span><span style=color:#a3be8c>counter,warn
</span></code></pre><p><strong>Using JSON:</strong><pre class=language-bash data-lang=bash style=color:#c0c5ce;background-color:#2b303b><code class=language-bash data-lang=bash><span style=color:#bf616a>errors</span><span>='</span><span style=color:#a3be8c>{"handler":"counter"},{"handler":"warn"}</span><span>'
</span></code></pre><p><strong>Using simplified params:</strong><pre class=language-bash data-lang=bash style=color:#c0c5ce;background-color:#2b303b><code class=language-bash data-lang=bash><span style=color:#bf616a>errors</span><span>='</span><span style=color:#a3be8c>handler=counter,handler=warn,handler=code code=42</span><span>'
</span></code></pre><p>Handler verbs are shorthand for canonical object definitions with properties. The <code>handler</code> property selects the implementation. Each handler may have its own options.<h2 id=building-handler-chains>Building Handler Chains</h2><p><strong>Single handler entry:</strong><pre style=color:#c0c5ce;background-color:#2b303b><code><span>&LTerror_pattern>:&LTverb>,&LTverb>,...
</span></code></pre><p><strong>Multiple handler entries:</strong><pre style=color:#c0c5ce;background-color:#2b303b><code><span>&LTpattern1>:&LTverbs>;&LTpattern2>:&LTverbs>;&LTpattern3>:&LTverbs>
</span></code></pre><h2 id=examples>Examples</h2><h3 id=count-missing-exceptions>Count Missing Exceptions</h3><p>Count all exceptions named <code>Missing.*</code>, count and warn about <code>RuntimeEx.*</code>, ignore everything else:<pre class=language-bash data-lang=bash style=color:#c0c5ce;background-color:#2b303b><code class=language-bash data-lang=bash><span style=color:#bf616a>errors</span><span>='</span><span style=color:#a3be8c>Missing.*:counter;RuntimeEx.*:counter,warn;.*:ignore</span><span>'
</span></code></pre><h3 id=retry-ioexception>Retry IOException</h3><p>Retry all operations experiencing an <code>IOException</code>:<pre class=language-bash data-lang=bash style=color:#c0c5ce;background-color:#2b303b><code class=language-bash data-lang=bash><span style=color:#bf616a>errors</span><span>='</span><span style=color:#a3be8c>IOException:retry</span><span>'
</span></code></pre><h3 id=retry-with-limit>Retry with Limit</h3><p>Retry IOExceptions up to 5 times:<pre class=language-bash data-lang=bash style=color:#c0c5ce;background-color:#2b303b><code class=language-bash data-lang=bash><span style=color:#bf616a>errors</span><span>='</span><span style=color:#a3be8c>IOException:retry</span><span>' </span><span style=color:#bf616a>maxtries</span><span>=</span><span style=color:#a3be8c>5
</span></code></pre><h3 id=track-specific-errors>Track Specific Errors</h3><p>Track timing for connection errors, retry them, but stop on other errors:<pre class=language-bash data-lang=bash style=color:#c0c5ce;background-color:#2b303b><code class=language-bash data-lang=bash><span style=color:#bf616a>errors</span><span>='</span><span style=color:#a3be8c>ConnectionException:timer,retry;.*:stop</span><span>'
</span></code></pre><h3 id=comprehensive-error-tracking>Comprehensive Error Tracking</h3><p>Count all errors, retry transient ones, stop on fatal ones:<pre class=language-bash data-lang=bash style=color:#c0c5ce;background-color:#2b303b><code class=language-bash data-lang=bash><span style=color:#bf616a>errors</span><span>='</span><span style=color:#a3be8c>Timeout.*:counter,retry;Connection.*:counter,retry,warn;.*:counter,stop</span><span>'
</span></code></pre><h3 id=ignore-expected-errors>Ignore Expected Errors</h3><p>Ignore “not found” errors (expected in some workloads), track others:<pre class=language-bash data-lang=bash style=color:#c0c5ce;background-color:#2b303b><code class=language-bash data-lang=bash><span style=color:#bf616a>errors</span><span>='</span><span style=color:#a3be8c>NotFoundException:ignore;.*:counter,warn</span><span>'
</span></code></pre><h2 id=common-patterns>Common Patterns</h2><h3 id=development-debug>Development/Debug</h3><p>Fail fast on any error to catch issues early:<pre class=language-bash data-lang=bash style=color:#c0c5ce;background-color:#2b303b><code class=language-bash data-lang=bash><span style=color:#bf616a>errors</span><span>=</span><span style=color:#a3be8c>stop  </span><span style=color:#65737e># Default
</span></code></pre><h3 id=load-testing>Load Testing</h3><p>Retry transient errors, track all errors, don’t stop:<pre class=language-bash data-lang=bash style=color:#c0c5ce;background-color:#2b303b><code class=language-bash data-lang=bash><span style=color:#bf616a>errors</span><span>='</span><span style=color:#a3be8c>.*:retry,counter,warn</span><span>' </span><span style=color:#bf616a>maxtries</span><span>=</span><span style=color:#a3be8c>10
</span></code></pre><h3 id=soak-testing>Soak Testing</h3><p>Track errors but keep running:<pre class=language-bash data-lang=bash style=color:#c0c5ce;background-color:#2b303b><code class=language-bash data-lang=bash><span style=color:#bf616a>errors</span><span>='</span><span style=color:#a3be8c>.*:timer,retry</span><span>' </span><span style=color:#bf616a>maxtries</span><span>=</span><span style=color:#a3be8c>3
</span></code></pre><h3 id=chaos-testing>Chaos Testing</h3><p>Ignore specific injected failures, track unexpected ones:<pre class=language-bash data-lang=bash style=color:#c0c5ce;background-color:#2b303b><code class=language-bash data-lang=bash><span style=color:#bf616a>errors</span><span>='</span><span style=color:#a3be8c>InjectedFailure:ignore;.*:counter,stop</span><span>'
</span></code></pre><h2 id=integration-with-metrics>Integration with Metrics</h2><p>Error handlers integrate with the metrics system. When using <code>counter</code>, <code>histogram</code>, <code>meter</code>, or <code>timer</code>, metrics are created automatically:<p><strong>Metric naming:</strong><pre style=color:#c0c5ce;background-color:#2b303b><code><span>&LTactivity-name>.errors.&LTexception-name>.&LTmetric-type>
</span></code></pre><p><strong>Example:</strong><pre style=color:#c0c5ce;background-color:#2b303b><code><span>cql-keyvalue.errors.ConnectionException.timer
</span><span>cql-keyvalue.errors.TimeoutException.counter
</span></code></pre><p>Query these metrics using MetricsQL:<pre class=language-bash data-lang=bash style=color:#c0c5ce;background-color:#2b303b><code class=language-bash data-lang=bash><span style=color:#bf616a>./nb5</span><span> mql "</span><span style=color:#a3be8c>SELECT * FROM metrics WHERE name LIKE '%errors%'</span><span>"
</span></code></pre><h2 id=troubleshooting>Troubleshooting</h2><p><strong>Errors not being caught:</strong><ul><li>Check pattern regex syntax<li>Verify exception class name (Java class name, case-sensitive)<li>Add <code>.*:warn</code> at end to see all unmatched errors</ul><p><strong>Too many retries:</strong><ul><li>Reduce <code>maxtries</code> parameter<li>Review which errors should actually be retried<li>Consider <code>stop</code> for non-transient errors</ul><p><strong>Metrics not appearing:</strong><ul><li>Ensure you’re using metric verbs (<code>counter</code>, <code>timer</code>, etc.)<li>Check metric names with <code>./nb5 mql summary</code><li>Verify metrics export is configured</ul><h2 id=related-documentation>Related Documentation</h2><ul><li><strong><a href=../workload-design/activity-parameters.md>Activity Parameters</a></strong> - All activity configuration options<li><strong><a href=../metrics/standard-metrics.md>Standard Metrics</a></strong> - Understanding metrics<li><strong><a href=https://docs.nosqlbench.io/guides/troubleshooting/error-handling/common-errors.md>Common Errors</a></strong> - Troubleshooting specific error types<li><strong><a href=../../reference/apps/mql.md>MetricsQL Reference</a></strong> - Querying error metrics</ul><hr><p><em>Error handlers provide fine-grained control over error behavior, enabling robust testing even in the presence of transient failures.</em></article></main><footer><div class=c><nav class=tpad><div></div></nav><p>© <span id=year>2025</span> NoSQLBench Documentation<p>Powered by <a href=https://www.getzola.org/ target=_blank>Zola</a> & <a href=https://github.com/jieiku/abridge/ target=_blank>Abridge</a></div></footer><span class=topout> <span class=topleft> </span><a title="Back to Top" class=top href=#><i class="svgs svgh angu"></i></a> </span>