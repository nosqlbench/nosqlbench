<!doctype html><html lang=en><head><script integrity=sha384-pb++s6uBRKaQv+iAXpgA/H3IlpLZdO14tTwuCI7uXmz4aaZdByoCcM+6BhynMq/1 src=https://docs.nosqlbench.io/js/theme.min.js></script><link href="https://docs.nosqlbench.io/abridge.css?h=17d1d14ae374495df55a" rel=stylesheet><meta charset=utf-8><meta content="ie=edge" http-equiv=x-ua-compatible><meta content="width=device-width,initial-scale=1" name=viewport><meta content=https://docs.nosqlbench.io name=base><meta content=True name=HandheldFriendly><meta content=yes name=mobile-web-app-capable><meta content=yes name=apple-mobile-web-app-capable><meta content=default name=apple-mobile-web-app-status-bar-style><link href=https://docs.nosqlbench.io/favicon.svg rel=icon type=image/svg+xml><link title="NoSQLBench Documentation Atom Feed" href=https://docs.nosqlbench.io/atom.xml rel=alternate type=application/atom+xml><meta content="index, follow" name=robots><meta content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1" name=googlebot><meta content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1" name=bingbot><title>Error Handlers | NoSQLBench Documentation</title><meta content="NoSQLBench Team" name=author><meta content="NoSQLBench Documentation" name=copyright><meta content="How to configure error handling in NoSQLBench activities" name=description><link href=https://docs.nosqlbench.io/guides/workload-design/error-handlers/ rel=canonical><meta content=https://docs.nosqlbench.io/guides/workload-design/error-handlers/ property=og:url><meta content=https://docs.nosqlbench.io/guides/workload-design/error-handlers/ name=twitter:url><meta content="How to configure error handling in NoSQLBench activities" property=og:description><meta content="How to configure error handling in NoSQLBench activities" name=twitter:description><meta content="Error Handlers | NoSQLBench Documentation" property=og:title><meta content="Error Handlers | NoSQLBench Documentation" name=twitter:title><meta content=summary name=twitter:card><meta content="NoSQLBench Documentation" property=og:site_name><meta content=en_US property=og:locale><meta content=website property=og:type><meta property=og:updated_time><script src="https://docs.nosqlbench.io/js/theme_button.js?h=12a31e87fcbe7a55e953" defer integrity=sha384-UBxLGgFVZtEgNzOU3WqKoFT1oILftGjShFO4WIs1dO/jK7SNyz7BMYCYt5PffTxe></script><script src="https://docs.nosqlbench.io/js/email.js?h=ee3dd742e11c5014fdef" defer integrity=sha384-y0LUfjslyVLYZvCOyhELpvKivlXAq27Vnbed54glXoe/pZSYS/Pfqghp/sQt1xcV></script><script src="https://docs.nosqlbench.io/js/codecopy.js?h=0a54f99e682443925d3a" defer integrity=sha384-qssVvPpQgISh4PFkSBGTgXEMzuFO8Hat5m1MsdkpannoByWSTpLfBe4iEVl3+RiP></script><script src="https://docs.nosqlbench.io/js/elasticlunr.min.js?h=4f648b9e42abdef9c436" defer integrity=sha384-Q8viz7rndi8MSNDtItDgVWNSrCumjepopRMlz2nElkWPRXDQAcfiZGJbrCJVXdtw></script><script src="https://docs.nosqlbench.io/search_index.en.js?h=e2df0fd710d0c807a7aa" defer integrity=sha384-nyOftseEtxo2Pc23RFR1hxsCZHtUr0xOCP7JVJ8oGIs+cnDq6GZkzCq2hWZ2cJIh></script><script src="https://docs.nosqlbench.io/js/searchjava.js?h=36b818b07e8b2b318967" defer integrity=sha384-i6K7Uy98ZLnOwn6no8sDUTeBitDmiLHOKxkcJYbjgu6vQ3hdyMQPzmeuX04BRs8J></script><noscript><link href=https://docs.nosqlbench.io/nojs.css rel=stylesheet></noscript><body><header><nav><div><big><a title="NoSQLBench Documentation" href=https://docs.nosqlbench.io></a></big></div><div><div><ul><li><a href=https://docs.nosqlbench.io/tutorials/> Tutorials </a><li><a href=https://docs.nosqlbench.io/guides/> Guides </a><li><a href=https://docs.nosqlbench.io/reference/> Reference </a><li><a href=https://docs.nosqlbench.io/explanations/> Explanations </a><li><a href=https://docs.nosqlbench.io/development/> Development </a><li><a href=https://github.com/nosqlbench/nosqlbench target=_blank> GitHub </a><li><i class="js svgs adjust" id=mode type=reset></i></ul></div><div><div><form autocomplete=off class=js id=searchbox name=goSearch><div class=searchd><input id=searchinput placeholder=Search title=Search><button class="svgs svgm search" title=Search></button></div><div class=results><div id=suggestions></div></div></form></div></div></div></nav></header><main><article><h1><a href=https://docs.nosqlbench.io/guides/workload-design/error-handlers/>Error Handlers</a></h1><p>NoSQLBench v5 has a standard error handler mechanism which is available to all drivers.<p>If no error handler is configured for an activity, then the default error handler is used:<pre style=color:#c0c5ce;background-color:#2b303b><code><span>errors=stop
</span></code></pre><p>This error handler is a modular and highly configurable error handler with a very basic set of defaults: If you don’t configure it, then any error thrown by an activity will cause it to stop. This is indicated by the default <code>errors=stop</code>.<p>The default configuration is just a fail-fast default. It is the simplest possible error handler configuration.<h2 id=handler-verbs>Handler Verbs</h2><p>The currently supported handler verbs, like <code>stop</code> above, are:<ul><li><strong>ignore</strong> If an error matches this verb in a handler chain, then it will be silently ignored. It will not be retried. Although combining ignore with retry will cause it to be silently retried.<li><strong>counter</strong> Count each uniquely named error with a counter metric.<li><strong>histogram</strong> Track the session time of each uniquely named error with a histogram.<li><strong>meter</strong> Meter each uniquely named error with a meter metric.<li><strong>retry</strong> - Mark the error as retryable. If an activity has retries available, the operation will be retried. By default, activities which allow ops to be retried will have <code>maxtries=10</code>.<li><strong>stop</strong> Allow the error to propagate through the stack to cause the activity to be stopped.<li><strong>timer</strong> Count, Meter, and Track session times of each uniquely named error with a timer metric, which combines the three forms above.<li><strong>warn</strong> Log a warning to the log with the error details.<li><strong>code</strong> Assign a specific result code to any matching errors. You can configure this as shorthand in a handler list as just a number: <code>errors=RuntimeException:33,warn</code></ul><p>You can use any of these verbs in any order in a handler list.<h2 id=chains-of-handler-lists>Chains of Handler Lists</h2><p>The structure of a handler is a list of list. In order to make this easier to discuss in terms of configuration, the top level is called the <em>Handler Chain</em> and the individual handler lists at each link in the chain are called <em>Handler Verbs</em>.<p>The first matching set of handler verbs is used. When an exception is thrown, the handler chain is walked until a matching handler is found. If none are found, then no handlers apply, which is the same as assigning <code>ignore</code>, which does nothing. If you want a default handler list to apply to otherwise-unmatched exceptions, be sure to add one at the end for anything matching <code>.*</code>.<p>The illustration below shows the handler chain structure for the handler configuration shown.<pre style=color:#c0c5ce;background-color:#2b303b><code><span> errors=Invalid.*:ignore;Runtime.*:warn,histogram;counter,42
</span><span>
</span><span>                     |-----------|-----------|-----------|
</span><span> handler chain ==>   | 1         | 2         | 3         |
</span><span>                     |===========|===========|===========|
</span><span> error patterns ==>  | Invalid.* | Runtime.* | .*        |
</span><span>                     |===========| Array.*   |===========|
</span><span> handler verbs ==>   | ignore    |===========| counter   |
</span><span>                     |-----------| warn      | 42        |
</span><span>                                 | histogram |-----------|
</span><span>                                 |-----------|
</span></code></pre><p>In this example, there are three handler configuration. When an error is thrown by an activity, the handler chain is called. When a matching handler is found by matching any of the error patterns against the exception name, that column (the handler list) is selected, and each handler in that list is applied in order to the error.<p>Specifically, the Java class name of the exception type is matched against the error patterns going left to right. The first one that matches selects the error handler list to use.<h2 id=error-handler-configuration>Error Handler Configuration</h2><p>The default setting of <code>errors=stop</code> uses a shorthand form for specifying error handlers. The parameter name <code>errors</code> will become the universal activity parameter for configuring error handling going forward.<p><code>errors=stop</code> is shorthand for <code>errors=.*:stop</code>. This is simply a single handler list which has the default wildcard error matcher.<p>A handler definition is thus comprised of the error matching patterns and the error handling verbs which should be applied when an error matches the patterns. If the error matching patterns are not provided, then the default wildcard pattern and delimiter <code>.*:</code>is automatically prepended.<h3 id=error-pattern-formats>Error Pattern Formats</h3><p>An error pattern is simply a regular expression, although the characters are limited intentionally to a subset: <code>[a-zA-Z0-9.-_*+]</code>. Multiple patterns may be used, like <code>Missing.*,RuntimeEx.*</code>.<p>More customizable ways to map an error to a particular handler list may be provided if/when needed.<h3 id=handler-verb-formats>Handler Verb Formats</h3><p>A specific handler list is defined as a set of handler verbs separated by commas. Alternately, handler verbs may be blocks of JSON or other standard NoSQLBench encoding formats, as long as they are protected by quotes:<pre style=color:#c0c5ce;background-color:#2b303b><code><span># basic verb-only form
</span><span>counter,warn
</span><span>
</span><span># using JSON
</span><span>"{\"handler\"=\"counter\"},{\"handler\"=\"warn\"}"
</span><span>
</span><span># using simplified params form
</span><span>"handler=counter,handler=warn,handler=code code=42"
</span></code></pre><p>This shows that handler verbs are really just shorthand for more canonical object definitions which have their own properties. The handler property is the one that select which handler implementation to use. Each handler implementation may have its own options. Those will be documented as they are added.<h2 id=building-handler-chains>Building Handler Chains</h2><p>To construct a handler entry, simply concatenate the error pattern to the verbs using a colon.<p>To have multiple handler entries, concatenate them in the order of your choosing with semicolons.<h2 id=examples>Examples</h2><p>Count (in metrics) all occurrences of exceptions named Missing.* (anything matching the regex), but count and warn about anything matching the exception nameRuntimeEx.*. Ignore everything else.<pre style=color:#c0c5ce;background-color:#2b303b><code><span>errors='Missing.*:counter;RuntimeEx.*:counter,warn;.*:ignore'
</span></code></pre><p>Retry all operations which experience an IOException:<pre style=color:#c0c5ce;background-color:#2b303b><code><span>errors='IOException:retry'
</span></code></pre></article></main><footer><div class=c><nav class=tpad><div></div></nav><p>© <span id=year>2025</span> NoSQLBench Documentation<p>Powered by <a href=https://www.getzola.org/ target=_blank>Zola</a> & <a href=https://github.com/jieiku/abridge/ target=_blank>Abridge</a></div></footer><span class=topout> <span class=topleft> </span><a title="Back to Top" class=top href=#><i class="svgs svgh angu"></i></a> </span>