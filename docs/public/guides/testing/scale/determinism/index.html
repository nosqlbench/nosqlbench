<!doctype html><html lang=en><head><script integrity=sha384-pb++s6uBRKaQv+iAXpgA/H3IlpLZdO14tTwuCI7uXmz4aaZdByoCcM+6BhynMq/1 src=https://docs.nosqlbench.io/js/theme.min.js></script><link href="https://docs.nosqlbench.io/abridge.css?h=17d1d14ae374495df55a" rel=stylesheet><meta charset=utf-8><meta content="ie=edge" http-equiv=x-ua-compatible><meta content="width=device-width,initial-scale=1" name=viewport><meta content=https://docs.nosqlbench.io name=base><meta content=True name=HandheldFriendly><meta content=yes name=mobile-web-app-capable><meta content=yes name=apple-mobile-web-app-capable><meta content=default name=apple-mobile-web-app-status-bar-style><link href=https://docs.nosqlbench.io/favicon.svg rel=icon type=image/svg+xml><link title="NoSQLBench Documentation Atom Feed" href=https://docs.nosqlbench.io/atom.xml rel=alternate type=application/atom+xml><meta content="index, follow" name=robots><meta content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1" name=googlebot><meta content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1" name=bingbot><title>Determinism & Variation | NoSQLBench Documentation</title><meta content="NoSQLBench Team" name=author><meta content="NoSQLBench Documentation" name=copyright><meta content="Using procedural generation for reproducible tests" name=description><link href=https://docs.nosqlbench.io/guides/testing/scale/determinism/ rel=canonical><meta content=https://docs.nosqlbench.io/guides/testing/scale/determinism/ property=og:url><meta content=https://docs.nosqlbench.io/guides/testing/scale/determinism/ name=twitter:url><meta content="Using procedural generation for reproducible tests" property=og:description><meta content="Using procedural generation for reproducible tests" name=twitter:description><meta content="Determinism & Variation | NoSQLBench Documentation" property=og:title><meta content="Determinism & Variation | NoSQLBench Documentation" name=twitter:title><meta content=summary name=twitter:card><meta content="NoSQLBench Documentation" property=og:site_name><meta content=en_US property=og:locale><meta content=website property=og:type><meta property=og:updated_time><script src="https://docs.nosqlbench.io/js/theme_button.js?h=12a31e87fcbe7a55e953" defer integrity=sha384-UBxLGgFVZtEgNzOU3WqKoFT1oILftGjShFO4WIs1dO/jK7SNyz7BMYCYt5PffTxe></script><script src="https://docs.nosqlbench.io/js/email.js?h=ee3dd742e11c5014fdef" defer integrity=sha384-y0LUfjslyVLYZvCOyhELpvKivlXAq27Vnbed54glXoe/pZSYS/Pfqghp/sQt1xcV></script><script src="https://docs.nosqlbench.io/js/codecopy.js?h=0a54f99e682443925d3a" defer integrity=sha384-qssVvPpQgISh4PFkSBGTgXEMzuFO8Hat5m1MsdkpannoByWSTpLfBe4iEVl3+RiP></script><script src="https://docs.nosqlbench.io/js/elasticlunr.min.js?h=4f648b9e42abdef9c436" defer integrity=sha384-Q8viz7rndi8MSNDtItDgVWNSrCumjepopRMlz2nElkWPRXDQAcfiZGJbrCJVXdtw></script><script src="https://docs.nosqlbench.io/search_index.en.js?h=e2df0fd710d0c807a7aa" defer integrity=sha384-nyOftseEtxo2Pc23RFR1hxsCZHtUr0xOCP7JVJ8oGIs+cnDq6GZkzCq2hWZ2cJIh></script><script src="https://docs.nosqlbench.io/js/searchjava.js?h=36b818b07e8b2b318967" defer integrity=sha384-i6K7Uy98ZLnOwn6no8sDUTeBitDmiLHOKxkcJYbjgu6vQ3hdyMQPzmeuX04BRs8J></script><noscript><link href=https://docs.nosqlbench.io/nojs.css rel=stylesheet></noscript><body><header><nav><div><big><a title="NoSQLBench Documentation" href=https://docs.nosqlbench.io></a></big></div><div><div><ul><li><a href=https://docs.nosqlbench.io/tutorials/> Tutorials </a><li><a href=https://docs.nosqlbench.io/guides/> Guides </a><li><a href=https://docs.nosqlbench.io/reference/> Reference </a><li><a href=https://docs.nosqlbench.io/explanations/> Explanations </a><li><a href=https://docs.nosqlbench.io/development/> Development </a><li><a href=https://github.com/nosqlbench/nosqlbench target=_blank> GitHub </a><li><i class="js svgs adjust" id=mode type=reset></i></ul></div><div><div><form autocomplete=off class=js id=searchbox name=goSearch><div class=searchd><input id=searchinput placeholder=Search title=Search><button class="svgs svgm search" title=Search></button></div><div class=results><div id=suggestions></div></div></form></div></div></div></nav></header><main><article><h1><a href=https://docs.nosqlbench.io/guides/testing/scale/determinism/>Determinism & Variation</a></h1><p>This section touches on topics of using randomized data within NoSQLBench tests.<h2 id=benefits>Benefits</h2><p>The benefits of using procedural generation for the purposes of load testing is taken as granted in this section. For a more thorough discussion on the merits, please see the Virtual DataSet concepts in the explanations section.<h2 id=basic-theory>Basic Theory</h2><p>In NoSQLBench, the data used for each operation is generated on the fly. However, the data is also deterministic by default. That means, for a given activity, any numbered cycle will produce the same operation from test to test, so long as the parameters are the same.<p>NoSQLBench runs each activity over a specific range of cycles. For each cycle, an operation is built from a template using that cycle as a seed. The cycle value determines which op template to use as well as all the payload values and/or configuration details for that operation.<p>The machinery which is responsible for dispatching operations to run is initialized before an activity starts to optimize performance while the activity is running.<h2 id=managing-variation>Managing Variation</h2><p>There are ways of selecting how much variation you have from one test scenario to another.<p>Sometimes you will want to run the same test with the same operations, access patterns, and data. This may be necessary in advanced testing scenarios, since it can make data or order-specific problems reproducible. The ability to run the same test between different target systems is extremely valuable.<h3 id=selecting-cycles>Selecting Cycles</h3><p>You can cause an activity to run a different set of operations simply by changing the cycle range used in the test.<p>For an activity that is configured with <code>cycles=100M</code>, 100 million independent cycles will be used. These cycles will be automatically apportioned to the client threads as needed until they are all used up.<p>If you want to run 100 million different cycles, all you have to do is specify a different set of seeds. This is as simple as specifying <code>cycles=100M..200M</code>, as the first example above is only short-hand for <code>cycles=0..100M</code>.<h3 id=selecting-bindings>Selecting Bindings</h3><p>The built-in workloads come with bindings which support the <em>rampup</em> and <em>main</em> testing activities appropriately. This means that the cycles for rampup will use a binding that lays data into a dataset incrementally, as you would build a log cabin. Each cycle adds to the data. The bindings are chosen for this effect so that the rampup activity is incremental with the cycle value.<p>The main activity bindings are selected differently. In the main activity, you don’t want to address over the data in order. To emulate a real workload, you need to select the data pseudo-randomly so that storage devices don’t get to cheat with read-ahead (more than they would realistically) and so on. That means that the main activity bindings are also specifically chosen for the “random” access patterns that you might expect in some workloads.<p>The distinction between these two types of bindings should tell you something about the binding capabilities. You can really do what ever you want as long as you can stitch the right functions together to get there. Although the data produced by some functions (like <code>Hash()</code> for example) look random, they are not. They are, however, effectively random enough for most distributed systems performance testing.<p>If you need to add randomization to fields, it doesn’t hurt to add an additional <code>Hash()</code> to the front. Just be advised that the same constructions from one bind point to the next will yield the same outputs, so season to taste.</article></main><footer><div class=c><nav class=tpad><div></div></nav><p>© <span id=year>2025</span> NoSQLBench Documentation<p>Powered by <a href=https://www.getzola.org/ target=_blank>Zola</a> & <a href=https://github.com/jieiku/abridge/ target=_blank>Abridge</a></div></footer><span class=topout> <span class=topleft> </span><a title="Back to Top" class=top href=#><i class="svgs svgh angu"></i></a> </span>