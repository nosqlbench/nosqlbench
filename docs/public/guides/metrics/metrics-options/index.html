<!doctype html><html lang=en><head><script integrity=sha384-pb++s6uBRKaQv+iAXpgA/H3IlpLZdO14tTwuCI7uXmz4aaZdByoCcM+6BhynMq/1 src=https://docs.nosqlbench.io/js/theme.min.js></script><link href="https://docs.nosqlbench.io/abridge.css?h=17d1d14ae374495df55a" rel=stylesheet><meta charset=utf-8><meta content="ie=edge" http-equiv=x-ua-compatible><meta content="width=device-width,initial-scale=1" name=viewport><meta content=https://docs.nosqlbench.io name=base><meta content=True name=HandheldFriendly><meta content=yes name=mobile-web-app-capable><meta content=yes name=apple-mobile-web-app-capable><meta content=default name=apple-mobile-web-app-status-bar-style><link href=https://docs.nosqlbench.io/favicon.svg rel=icon type=image/svg+xml><link title="NoSQLBench Documentation Atom Feed" href=https://docs.nosqlbench.io/atom.xml rel=alternate type=application/atom+xml><meta content="index, follow" name=robots><meta content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1" name=googlebot><meta content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1" name=bingbot><title>Metrics Options | NoSQLBench Documentation</title><meta content="NoSQLBench Team" name=author><meta content="NoSQLBench Documentation" name=copyright><meta content="How to configure and export metrics from NoSQLBench" name=description><link href=https://docs.nosqlbench.io/guides/metrics/metrics-options/ rel=canonical><meta content=https://docs.nosqlbench.io/guides/metrics/metrics-options/ property=og:url><meta content=https://docs.nosqlbench.io/guides/metrics/metrics-options/ name=twitter:url><meta content="How to configure and export metrics from NoSQLBench" property=og:description><meta content="How to configure and export metrics from NoSQLBench" name=twitter:description><meta content="Metrics Options | NoSQLBench Documentation" property=og:title><meta content="Metrics Options | NoSQLBench Documentation" name=twitter:title><meta content=summary name=twitter:card><meta content="NoSQLBench Documentation" property=og:site_name><meta content=en_US property=og:locale><meta content=website property=og:type><meta property=og:updated_time><script src="https://docs.nosqlbench.io/js/theme_button.js?h=12a31e87fcbe7a55e953" defer integrity=sha384-UBxLGgFVZtEgNzOU3WqKoFT1oILftGjShFO4WIs1dO/jK7SNyz7BMYCYt5PffTxe></script><script src="https://docs.nosqlbench.io/js/email.js?h=ee3dd742e11c5014fdef" defer integrity=sha384-y0LUfjslyVLYZvCOyhELpvKivlXAq27Vnbed54glXoe/pZSYS/Pfqghp/sQt1xcV></script><script src="https://docs.nosqlbench.io/js/codecopy.js?h=0a54f99e682443925d3a" defer integrity=sha384-qssVvPpQgISh4PFkSBGTgXEMzuFO8Hat5m1MsdkpannoByWSTpLfBe4iEVl3+RiP></script><script src="https://docs.nosqlbench.io/js/elasticlunr.min.js?h=4f648b9e42abdef9c436" defer integrity=sha384-Q8viz7rndi8MSNDtItDgVWNSrCumjepopRMlz2nElkWPRXDQAcfiZGJbrCJVXdtw></script><script src="https://docs.nosqlbench.io/search_index.en.js?h=e2df0fd710d0c807a7aa" defer integrity=sha384-nyOftseEtxo2Pc23RFR1hxsCZHtUr0xOCP7JVJ8oGIs+cnDq6GZkzCq2hWZ2cJIh></script><script src="https://docs.nosqlbench.io/js/searchjava.js?h=36b818b07e8b2b318967" defer integrity=sha384-i6K7Uy98ZLnOwn6no8sDUTeBitDmiLHOKxkcJYbjgu6vQ3hdyMQPzmeuX04BRs8J></script><noscript><link href=https://docs.nosqlbench.io/nojs.css rel=stylesheet></noscript><body><header><nav><div><big><a title="NoSQLBench Documentation" href=https://docs.nosqlbench.io></a></big></div><div><div><ul><li><a href=https://docs.nosqlbench.io/tutorials/> Tutorials </a><li><a href=https://docs.nosqlbench.io/guides/> Guides </a><li><a href=https://docs.nosqlbench.io/reference/> Reference </a><li><a href=https://docs.nosqlbench.io/explanations/> Explanations </a><li><a href=https://docs.nosqlbench.io/development/> Development </a><li><a href=https://github.com/nosqlbench/nosqlbench target=_blank> GitHub </a><li><i class="js svgs adjust" id=mode type=reset></i></ul></div><div><div><form autocomplete=off class=js id=searchbox name=goSearch><div class=searchd><input id=searchinput placeholder=Search title=Search><button class="svgs svgm search" title=Search></button></div><div class=results><div id=suggestions></div></div></form></div></div></div></nav></header><main><article><h1><a href=https://docs.nosqlbench.io/guides/metrics/metrics-options/>Metrics Options</a></h1><h2 id=unit-of-measure>Unit of Measure</h2><p>All metrics collected from activities are recorded in nanoseconds and ops per second. All histograms are recorded with 3 digits of precision using HDR histograms unless otherwise modified with the global <code>--hdr-digits</code> option or the activity-specific <code>hdr_digits</code> activity param.<h2 id=metric-outputs>Metric Outputs</h2><p>Metrics from a scenario run can be gathered in multiple ways:<ul><li>In the log output<li>In CSV files<li>In HDR histogram logs<li>In Histogram Stats logs (CSV)<li>To a monitoring system via graphite</ul><p>These command line options may generally be combined and used in combination. The command line options for enabling these are documented in the command line docs, although some examples of these may be found below.<h2 id=metrics-via-http-push>Metrics via HTTP push</h2><p>You can have your metrics pushed up to a metrics store via HTTP push method and the <a href=https://github.com/OpenObservability/OpenMetrics/blob/main/specification/OpenMetrics.md rel=noopener target=_blank>OpenMetrics Exposition</a> format.<pre style=color:#c0c5ce;background-color:#2b303b><code><span>--report-prompush-to "&LTpush gateway URL>"
</span></code></pre><p>When used with a receiving system like <a href=https://docs.victoriametrics.com/url-examples.html#apiv1importprometheus rel=noopener target=_blank>VictoriaMetrics API</a>, data is sent directly from NoSQLBench at the time of reporting directly to the downstream collector. This is a preferred method because it puts episodic (session-oriented) data into a near-synchronous alignment with respect to client behavior and dashboard visibility.<p>However, when used with the original <a href=https://github.com/prometheus/pushgateway rel=noopener target=_blank>Prometheus pushgateway</a>, the dataflow is still subject to a secondary polling time base as well as the requirement to set up the gateway as a polling target. This takes substantial control out of the hands of the testing system in terms of timeliness, timing resolution, ephemeral fixtures, and so on.<h2 id=metrics-via-graphite>Metrics via Graphite</h2><p>If you like to have all of your testing data in one place, then you may be interested in reporting your measurements to a monitoring system. For this, NoSQLBench includes a <a href=https://github.com/dropwizard/metrics rel=noopener target=_blank>Metrics Library</a>. Graphite reporting is baked in as the default reporter.<p>In order to enable graphite reporting, use one of these options formats:<pre style=color:#c0c5ce;background-color:#2b303b><code><span>--report-graphite-to &LThost>
</span><span>--report-graphite-to &LThost>:&LTport>
</span></code></pre><h2 id=metric-naming>Metric Naming</h2><p><strong>Prefix</strong><p>Core metrics use the prefix <em>nosqlbench</em> by default. You can override this with the `` –metrics-prefix` option:<pre style=color:#c0c5ce;background-color:#2b303b><code><span>--metrics-prefix myclient.group5
</span></code></pre><p><strong>Identifiers</strong><p>Metrics associated with a specific activity will have the activity alias in their name. There is a set of core metrics which are always present regardless of the activity type. The names and types of additional metrics provided for each activity type vary.<p>Sometimes, an activity type will expose metrics on a per-statement basis, measuring over all invocations of a given statement as defined in the YAML. In these cases, you will see <code>--</code> separating the name components of the metric. At the most verbose, a metric name could take on the form like <code>&LTactivity>.&LTdocname>--&LTblockname>--&LTstatementname>--&LTmetricname></code>, although this is rare when you name your statements, which is recommended. Just keep in mind that the double dash connects an activity’s alias with named statements <em>within</em> that activity.<h2 id=hdr-histograms>HDR Histograms</h2><h3 id=recording-hdr-histogram-logs>Recording HDR Histogram Logs</h3><p>You can record details of histograms from any compatible metric (histograms and timers) with an option like this:<pre style=color:#c0c5ce;background-color:#2b303b><code><span>--log-histograms hdrdata.log
</span></code></pre><p>If you want to record only certain metrics in this way, then use this form:<pre style=color:#c0c5ce;background-color:#2b303b><code><span>--log-histograms 'hdrdata.log:.*suffix'
</span></code></pre><p>Notice that the option is enclosed in single quotes. This is because the second part of the option value is a regex. The ‘.*suffix’ pattern matches any metric name that ends with “suffix”. Effectively, leaving out the pattern is the same as using ‘.*’, which matches all metrics. Any valid regex is allowed here.<p>Metrics may be included in multiple logs, but care should be taken not to overdo this. Keeping higher fidelity histogram reservoirs does come with a cost, so be sure to be specific in what you record as much as possible.<p>If you want to specify the recording interval, use this form:<pre style=color:#c0c5ce;background-color:#2b303b><code><span>--log-histograms 'hdrdata.log:.*suffix:5s'
</span></code></pre><p>If you want to specify the interval, you must use the third form above, although it is valid to leave the pattern empty, such as ‘hdrdata.log::5s’.<p>Each interval specified will be tracked in a discrete reservoir in memory, so they will not interfere with each other in terms of accuracy.<h3 id=recording-hdr-histogram-stats>Recording HDR Histogram Stats</h3><p>You can also record basic snapshots of histogram data on a periodic interval just like above with HDR histogram logs. The option to do this is:<pre style=color:#c0c5ce;background-color:#2b303b><code><span>--log-histostats 'hdrstats.log:.*suffix:10s'
</span></code></pre><p>Everything works the same as for hdr histogram logging, except that the format is in CSV as shown in the example below:<pre style=color:#c0c5ce;background-color:#2b303b><code><span>#logging stats for session scenario-1479089852022
</span><span>#[Histogram log format version 1.0]
</span><span>#[StartTime: 1479089852.046 (seconds since epoch), Sun Nov 13 20:17:32 CST 2016]
</span><span>#Tag,Interval_Start,Interval_Length,count,min,p25,p50,p75,p90,p95,p98,p99,p999,p9999,max
</span><span>Tag=diag1.delay,0.457,0.044,1,16,31,31,31,31,31,31,31,31,31,31
</span><span>Tag=diag1.cycles,0.48,0.021,31,4096,8191,8191,8191,8191,8191,8191,8191,8191,8191,2097151
</span><span>Tag=diag1.delay,0.501,0.499,1,1,1,1,1,1,1,1,1,1,1,1
</span><span>Tag=diag1.cycles,0.501,0.499,498,1024,2047,2047,4095,4095,4095,4095,4095,4095,4095,4194303
</span><span>...
</span></code></pre><p>This includes the metric name (Tag), the interval start time and length (from the beginning of collection time), number of metrics recorded (count), minimum magnitude, a number of percentile measurements, and the maximum value. Notice that the format used is similar to that of the HDR logging, although instead of including the raw histogram data, common percentiles are recorded directly.</article></main><footer><div class=c><nav class=tpad><div></div></nav><p>© <span id=year>2025</span> NoSQLBench Documentation<p>Powered by <a href=https://www.getzola.org/ target=_blank>Zola</a> & <a href=https://github.com/jieiku/abridge/ target=_blank>Abridge</a></div></footer><span class=topout> <span class=topleft> </span><a title="Back to Top" class=top href=#><i class="svgs svgh angu"></i></a> </span>